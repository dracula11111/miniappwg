/* ============================================
   CASES PAGE — PREMIUM RIBBON TRACK + GLASS
   (Works with generateCasesGrid() markup in public/js/cases.js)
   ============================================ */

/* Body/page safety for Telegram Mini App */
body:has(.page-active#casesPage){
  overflow-y: auto;
  overflow-x: hidden;
  max-width: 100vw;
}

/* ============================================
   SKY THEME (Cases page only)
   ============================================ */
body:has(.page-active#casesPage){
  /* Sky -> space gradient (NO clouds in page background) */
  background:
    radial-gradient(980px 560px at 50% 112%,
      rgba(255,255,255,0.26) 0%,
      rgba(150,220,255,0.12) 40%,
      rgba(0,0,0,0.00) 74%),
    radial-gradient(820px 420px at 50% -160px,
      rgba(120,170,255,0.22) 0%,
      rgba(40,90,220,0.10) 34%,
      rgba(0,0,0,0.00) 72%),
    linear-gradient(180deg,
      #020413 0%,
      #041137 20%,
      #062a67 40%,
      #0b4aa0 64%,
      #4fb3ff 84%,
      #bfeaff 100%);
  background-repeat: no-repeat;
  background-attachment: scroll;
  background-size: 100% 300vh;
  min-height: 100vh;

  /* Local "sky" palette for overlays (keeps global dark variables intact) */
  --sky-glass: rgba(8, 28, 60, 0.18);
  --sky-border: rgba(255,255,255,0.22);
  --sky-shadow: rgba(7, 30, 70, 0.22);
  --sky-ink: rgba(255,255,255,0.94);

  color: var(--sky-ink);
  position: relative;
}

/* Слой со звездами поверх градиента */
body:has(.page-active#casesPage)::before{
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  
  background:
    url('/icons/pstar.svg') 15% 8% / 8px 8px no-repeat,
    url('/icons/pstar.svg') 82% 12% / 6px 6px no-repeat,
    url('/icons/pstar.svg') 28% 18% / 7px 7px no-repeat,
    url('/icons/pstar.svg') 91% 25% / 5px 5px no-repeat,
    url('/icons/pstar.svg') 42% 6% / 6px 6px no-repeat,
    url('/icons/pstar.svg') 68% 15% / 8px 8px no-repeat,
    url('/icons/pstar.svg') 8% 22% / 5px 5px no-repeat,
    url('/icons/pstar.svg') 95% 9% / 7px 7px no-repeat,
    url('/icons/pstar.svg') 55% 11% / 6px 6px no-repeat,
    url('/icons/pstar.svg') 73% 4% / 5px 5px no-repeat,
    url('/icons/pstar.svg') 22% 14% / 7px 7px no-repeat,
    url('/icons/pstar.svg') 88% 19% / 6px 6px no-repeat;
  
  background-repeat: no-repeat;
  
  /* Инвертируем цвет чтобы звезды стали белыми и добавляем яркость */
  filter: invert(1) brightness(1.5);
  opacity: 0.8;
}

#casesPage{
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  position: relative;
}

/* ============================================
   TOP AREA (logo + pills) — sky liquid glass
   ============================================ */

#casesPage{
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  position: relative;
}

/* Hide old hero/history blocks on Cases page */
#casesPage .cases-hero,
#casesPage .cases-history{
  display: none !important;
}

/* If any legacy grid/cards are still in DOM — hide */
#casesPage .cases-grid,
#casesPage .case-card{
  display: none !important;
}

/* ----------------------------
   Cases container
   ---------------------------- */
#casesPage #casesGrid.cases-path,
#casesPage .cases-path{
  position: relative;
  width: 100%;
  max-width: 100vw;
  padding: 18px 0 120px; /* bottom safe for navbar */
  min-height: 100dvh;
  overflow-x: hidden !important;
  scroll-behavior: smooth;
}

/* We no longer use the vertical “road” */
#casesPage #casesGrid.cases-path::before,
#casesPage .cases-path::before{
  display: none !important;
}

/* ----------------------------
   One case row
   ---------------------------- */
#casesPage .case-path-item{
  /* layout variables (easy tuning) */
  --track-w: min(680px, 92vw);
  --track-h: clamp(118px, 24vw, 150px);
  --case-s: clamp(176px, 48vw, 246px);

  position: relative;
  width: 100%;
  min-height: clamp(240px, 36vh, 320px);
  padding: 14px 0;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;

  display: grid;
  place-items: center;
}


/* ----------------------------
   Cloud divider / base (after each case)
   - Cloud is BEHIND ribbon + case
   - Price pill stays above everything
   ---------------------------- */
#casesPage .case-path-item::after{
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;

  width: min(1100px, 150vw);
  height: clamp(260px, 45vw, 380px);

  background: url('/images/cases/clouds/cloudupdown.webp') center / contain no-repeat;
  opacity: 0.85;

  z-index: -1;
  pointer-events: none;

  filter: drop-shadow(0 32px 48px rgba(0,0,0,0.28));
  transform: translate(-50%, -30%);
  /* animation: отключена */
}

/* keep cloud behind row content */
#casesPage .case-path-item{ isolation: isolate; }

/* small variation left/right so it feels “alive” */
/* #casesPage .case-path-item[data-position="left"]::after{ */
/*   animation-name: wtCloudFloatLeft; */
/* } */
/* #casesPage .case-path-item[data-position="right"]::after{ */
/*   animation-name: wtCloudFloatRight; */
/* } */
/*  */
/* @keyframes wtCloudFloatCenter{ */
/*   0%,100%{ transform: translate(-50%, 15%) translateY(0); } */
/*   50%{ transform: translate(-50%, 15%) translateY(-6px); } */
/* } */
/* @keyframes wtCloudFloatLeft{ */
/*   0%,100%{ transform: translate(-50%, 15%) translateX(-26px) translateY(0); } */
/*   50%{ transform: translate(-50%, 15%) translateX(-26px) translateY(-6px); } */
/* } */
/* @keyframes wtCloudFloatRight{ */
/*   0%,100%{ transform: translate(-50%, 15%) translateX(26px) translateY(0); } */
/*   50%{ transform: translate(-50%, 15%) translateX(26px) translateY(-6px); } */
/* } */

@media (prefers-reduced-motion: reduce){
  #casesPage .case-path-item::after{ animation: none; }
}

/* No node dot in new layout */
#casesPage .case-path-item::before{
  display: none !important;
}

/* ----------------------------
   Ribbon / track (base)
   ---------------------------- */
#casesPage .case-path-track{
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--track-w);
  height: var(--track-h);
  transform: translate(-50%, -50%);
  border-radius: 30px;
  overflow: hidden;
  isolation: isolate;

  background:
    url('/images/cases/clouds/cloud1.webp') 50% 55% / min(560px, 92%) auto no-repeat,
    radial-gradient(280px 180px at 18% 30%, rgba(255,255,255,0.10) 0%, transparent 70%),
    radial-gradient(260px 180px at 82% 70%, rgba(255,255,255,0.08) 0%, transparent 72%),
    rgba(255,255,255,0.06);
  background-blend-mode: soft-light, normal, normal, normal;


  border: 1px solid rgba(255,255,255,0.10);

  box-shadow:
    0 22px 52px rgba(0,0,0,0.52),
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -1px 0 rgba(0,0,0,0.36);

  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  z-index: 0;
  pointer-events: none;
}

/* Inner “groove” line where gifts ride */
#casesPage .case-path-track::before{
  content: "";
  position: absolute;
  left: 18px;
  right: 18px;
  top: 50%;
  transform: translateY(-50%);
  height: 2px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255,255,255,0.10) 16%,
    rgba(255,255,255,0.18) 50%,
    rgba(255,255,255,0.10) 84%,
    transparent 100%
  );
  opacity: 0.9;
  pointer-events: none;
  z-index: 1;
}

/* Slight highlight border */
#casesPage .case-path-track::after{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.06),
    inset 0 22px 40px rgba(255,255,255,0.04);
  pointer-events: none;
}

/* Shimmer pass */
#casesPage .case-path-track-shimmer{
  position: absolute;
  inset: -30%;
  background: linear-gradient(
    115deg,
    transparent 0%,
    rgba(255,255,255,0.00) 35%,
    rgba(255,255,255,0.20) 48%,
    rgba(255,255,255,0.00) 62%,
    transparent 100%
  );
  transform: translateX(-120%);
  animation: wtTrackShimmer 2.8s ease-in-out infinite;
  opacity: 0.55;
  mix-blend-mode: overlay;
  pointer-events: none;
}

@keyframes wtTrackShimmer{
  0%   { transform: translateX(-120%); }
  55%  { transform: translateX(120%); }
  100% { transform: translateX(120%); }
}

@media (prefers-reduced-motion: reduce){
  #casesPage .case-path-track-shimmer{ animation: none; }
}

/* ----------------------------
   Gifts moving along the ribbon
   ---------------------------- */
#casesPage .case-path-items{
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--track-w);
  height: var(--track-h);
  transform: translate(-50%, -50%);
  overflow: hidden;
  pointer-events: none;
  z-index: 1;

  /* fade-out on edges */
  -webkit-mask-image: linear-gradient(90deg, transparent 0%, #000 14%, #000 86%, transparent 100%);
  mask-image: linear-gradient(90deg, transparent 0%, #000 14%, #000 86%, transparent 100%);
}

/* Each gift “rides” left -> right with offsets */
#casesPage .case-path-item-float{
  position: absolute;
  top: 50%;
  width: clamp(46px, 12vw, 74px);
  height: clamp(46px, 12vw, 74px);
  transform: translateY(-50%);
  opacity: 0.96;

  animation: wtGiftRide 5.4s linear infinite;
  will-change: left, transform, opacity;
}

#casesPage .case-path-item-float:nth-child(1){ animation-delay: 0s; }
#casesPage .case-path-item-float:nth-child(2){ animation-delay: -1.8s; }
#casesPage .case-path-item-float:nth-child(3){ animation-delay: -3.6s; }

@keyframes wtGiftRide{
  0%{
    left: -90px;
    transform: translateY(-50%) scale(0.92);
    opacity: 0;
  }
  10%{ opacity: 1; }
  52%{ transform: translateY(-50%) scale(1.02); }
  90%{ opacity: 1; }
  100%{
    left: calc(100% + 90px);
    transform: translateY(-50%) scale(0.92);
    opacity: 0;
  }
}

#casesPage .case-path-item-float img{
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,0.42));
}

/* ----------------------------
   Case (center)
   ---------------------------- */
#casesPage .case-path-case{
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--case-s);
  transform: translate(-50%, -56%); /* a bit above the ribbon */
  display: grid;
  place-items: center;
  z-index: 3;
  pointer-events: none; /* click is on .case-path-item */
}

#casesPage .case-path-image-wrapper{
  position: relative;
  width: var(--case-s);
  height: var(--case-s);
  display: grid;
  place-items: center;
  overflow: visible;
}

/* Glow stays (case-specific colors) */
#casesPage .case-path-glow{
  position: absolute;
  inset: -42%;
  border-radius: 999px;
  filter: blur(46px);
  opacity: 0.72;
  pointer-events: none;
  z-index: 0;
  transform: translateZ(0);
}

#casesPage .case-path-glow::after{
  content: "";
  position: absolute;
  left: 50%;
  bottom: 14%;
  transform: translateX(-50%);
  width: 68%;
  height: 18%;
  border-radius: 999px;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.22), transparent 70%);
  filter: blur(18px);
  opacity: 0.55;
}

/* Individual glow colors */
#casesPage .case-path-item[data-case-id="case1"] .case-path-glow{
  background: radial-gradient(circle at 50% 55%, rgba(255,255,255,0.34), transparent 64%);
}
#casesPage .case-path-item[data-case-id="case2"] .case-path-glow{
  background: radial-gradient(circle at 50% 55%, rgba(64,224,208,0.36), transparent 64%);
}
#casesPage .case-path-item[data-case-id="case3"] .case-path-glow{
  background: radial-gradient(circle at 50% 55%, rgba(224,64,171,0.36), transparent 64%);
}
#casesPage .case-path-item[data-case-id="case4"] .case-path-glow{
  background: radial-gradient(circle at 50% 55%, rgba(64,150,255,0.36), transparent 64%);
}
#casesPage .case-path-item[data-case-id="case5"] .case-path-glow{
  background: radial-gradient(circle at 50% 55%, rgba(255,165,0,0.36), transparent 64%);
}

#casesPage img.case-path-image{
  position: relative;
  z-index: 3;
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  filter: drop-shadow(0 18px 34px rgba(0,0,0,0.55));
}

/* ----------------------------
   Liquid glass price pill (over the case, sitting on ribbon)
   ---------------------------- */
#casesPage .case-path-price{
  position: absolute;
  left: 50%;
  bottom: -10px;
  transform: translateX(-50%);
  z-index: 4;

  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 18px;
  border-radius: 999px;

  background: rgba(255,255,255,0.09);
  border: 1px solid rgba(255,255,255,0.17);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);

  box-shadow:
    0 10px 28px rgba(0,0,0,0.35),
    inset 0 1px 0 rgba(255,255,255,0.10);
}

#casesPage .case-path-price-icon{
  width: 20px;
  height: 20px;
  object-fit: contain;
  display: block;
  opacity: 0.95;
}

#casesPage .case-path-price-val,
#casesPage .case-path-price-value{
  font-size: 16px;
  font-weight: 900;
  color: rgba(255,255,255,0.95);
  font-variant-numeric: tabular-nums;
}

/* ----------------------------
   CASE 1 — WHITE PREMIUM RIBBON (requested example)
   ---------------------------- */
#casesPage .case-path-item[data-case-id="case1"]{
  --track-w: min(720px, 92vw);
}

/* Удалено: белый фон панели - теперь использует базовый прозрачный */

/* Удалено: темная линия внутри панели */

/* Удалено: особый shimmer для case1 */



/* ----------------------------
   Small screens
   ---------------------------- */
@media (max-width: 420px){
  #casesPage #casesGrid.cases-path,
  #casesPage .cases-path{
    padding: 14px 0 110px;
  }

  #casesPage .case-path-item{
    min-height: clamp(220px, 34vh, 300px);
  }

  #casesPage .case-path-price{
    padding: 9px 16px;
  }
}


/* ============================================
     BOTTOM SHEET & ALL OTHER EXISTING STYLES
     ============================================ */
    /* ----------------------------
       Bottom sheet overlay
       ---------------------------- */
    .case-overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.70);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      opacity:0;
      visibility:hidden;
      transition: opacity .25s ease, visibility .25s ease;
      z-index: 2000;
    }
    .case-overlay.active{
      opacity:1;
      visibility:visible;
    }
    
    .case-bottom-sheet{
      position: fixed;
      inset: 0;
      z-index: 2100;
      pointer-events:none;
    }
    
    .case-sheet-panel{
      position:absolute;
      left:0; right:0; bottom:0;
      max-height: 85vh;
      background: var(--bg);
      border-radius: 24px 24px 0 0;
      transform: translateY(100%);
      transition: transform .35s cubic-bezier(0.4,0,0.2,1);
      display:flex;
      flex-direction:column;
      overflow:hidden;
      box-shadow: 0 -4px 32px rgba(0,0,0,0.50);
      pointer-events: all;
      z-index: 2200;
    }
    .case-sheet-panel.active{ transform: translateY(0); }
    
    /* Case 1: White gradient background */
    .case-sheet-panel[data-case-id="case1"]{
      background: 
        radial-gradient(450px 300px at 50% -100px, rgba(255, 255, 255, 0.12) 0%, transparent 65%),
        radial-gradient(350px 250px at 80% 40%, rgba(200, 200, 255, 0.08) 0%, transparent 70%),
        radial-gradient(400px 300px at 20% 80%, rgba(255, 255, 255, 0.06) 0%, transparent 70%),
        var(--bg);
    }
    
    /* Case 2: Turquoise gradient */
    .case-sheet-panel[data-case-id="case2"]{
      background: 
        radial-gradient(450px 300px at 50% -100px, rgba(64, 224, 208, 0.10) 0%, transparent 65%),
        radial-gradient(350px 250px at 80% 40%, rgba(64, 224, 208, 0.06) 0%, transparent 70%),
        var(--bg);
    }
    
    /* Case 3: Pink/Purple gradient */
    .case-sheet-panel[data-case-id="case3"]{
      background: 
        radial-gradient(450px 300px at 50% -100px, rgba(224, 64, 171, 0.10) 0%, transparent 65%),
        radial-gradient(350px 250px at 80% 40%, rgba(224, 64, 216, 0.06) 0%, transparent 70%),
        var(--bg);
    }
  
      /* Case 4: Blue gradient */
      .case-sheet-panel[data-case-id="case4"]{
        background: 
          radial-gradient(450px 300px at 50% -100px, rgba(64, 150, 255, 0.10) 0%, transparent 65%),
          radial-gradient(350px 250px at 80% 40%, rgba(100, 180, 255, 0.06) 0%, transparent 70%),
          var(--bg);
      }
  
      /* Case 5: Orange gradient */
      .case-sheet-panel[data-case-id="case5"]{
        background: 
          radial-gradient(450px 300px at 50% -100px, rgba(255, 165, 0, 0.10) 0%, transparent 65%),
          radial-gradient(350px 250px at 80% 40%, rgba(255, 200, 50, 0.06) 0%, transparent 70%),
          var(--bg);
      }
  
    
    /* Header */
    .case-sheet-header{
      flex-shrink:0;
      display:flex;
      justify-content: space-between;
      align-items:center;
      padding: 20px;
      border-bottom: 1px solid var(--border);
    }
    .case-sheet-header h2{
      margin:0;
      font-size:20px;
      font-weight:700;
      color: var(--text);
    }
    .case-sheet-close{
      width:32px; height:32px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: var(--panel);
      border-radius: 999px;
      font-size:24px;
      color: var(--muted);
      transition: transform .12s ease, background .12s ease;
    }
    .case-sheet-close:active{
      transform: scale(0.92);
      background: var(--border);
    }
    
    /* ----------------------------
       Carousels
       ---------------------------- */
    .case-carousels-section{
      flex-shrink:0;
      padding: 24px 20px 16px;
    }
    .case-carousels-wrapper{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    
    .case-carousel{
      position:relative;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow:hidden;
      opacity:1;
      transform: scale(1);
      transition: opacity .2s ease, transform .2s ease;
    }
    .case-carousel.active{
      opacity:1;
      transform: scale(1);
    }
    
    .case-carousel{
      position: relative;
      overflow: hidden;
    }
    
    /* было: padding:8px; inset:0; */
    .case-carousel-items{
      position: absolute;
      top: 8px;
      right: 8px;
      bottom: 8px;
      left: 8px;
    
      display: flex;
      gap: 8px;
      align-items: center;
      will-change: transform;
    }
    
    .case-carousel-item{
      height: 100%;
      aspect-ratio: 1;
      flex-shrink: 0;
    
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .case-carousel-item img{
      width: 80%;
      height: 80%;
      object-fit: contain;
      display: block;
    }
    
    
    
    /* Subtle base glow behind PNG */
    .case-carousel-item::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background: rgba(255,255,255,0.035);
    }
    
  
  
  
    /* Winning highlight (very clear) */
    
  .case-carousel-item.winning::before{
    background: rgba(0, 166, 255, 0.26);
    box-shadow:
      inset 0 0 0 1px rgba(0, 166, 255, 0.34),
      0 0 26px rgba(0, 166, 255, 0.35);
  }
  
  /* Case 1: White winning highlight */
  .case-sheet-panel[data-case-id="case1"] .case-carousel-item.winning::before{
    background: rgba(255, 255, 255, 0.22);
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.45),
      0 0 26px rgba(255, 255, 255, 0.35);
  }
  
  /* Case 2: Turquoise winning highlight */
  .case-sheet-panel[data-case-id="case2"] .case-carousel-item.winning::before{
    background: rgba(64, 224, 208, 0.26);
    box-shadow:
      inset 0 0 0 1px rgba(64, 224, 208, 0.34),
      0 0 26px rgba(64, 224, 208, 0.35);
  }
  
  /* Case 3: Pink winning highlight */
  .case-sheet-panel[data-case-id="case3"] .case-carousel-item.winning::before{
    background: rgba(224, 64, 171, 0.26);
    box-shadow:
      inset 0 0 0 1px rgba(224, 64, 171, 0.34),
      0 0 26px rgba(224, 64, 171, 0.35);
  }
  
  /* Case 4: Blue winning highlight */
  .case-sheet-panel[data-case-id="case4"] .case-carousel-item.winning::before{
    background: rgba(64, 150, 255, 0.26);
    box-shadow:
      inset 0 0 0 1px rgba(64, 150, 255, 0.34),
      0 0 26px rgba(64, 150, 255, 0.35);
  }
  /* Case 5: Orange winning highlight */
  .case-sheet-panel[data-case-id="case5"] .case-carousel-item.winning::before{
    background: rgba(255, 165, 0, 0.26);
    box-shadow:
      inset 0 0 0 1px rgba(255, 165, 0, 0.34),
      0 0 26px rgba(255, 165, 0, 0.35);
  }
  
  
  
    .case-carousel-item.winning::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background: radial-gradient(circle at 50% 45%, rgba(255,255,255,0.12), transparent 60%);
    }
    
    /* Center indicator line */
    .case-carousel-indicator{
      position:absolute;
      top:0; bottom:0;
      left:50%;
      transform: translateX(-50%);
      width:3px;
      background: var(--accent);
      box-shadow: 0 0 12px var(--accent), 0 0 24px var(--accent);
      z-index: 10;
      pointer-events:none;
      transition: all .2s ease;
    }
    /* Case-specific carousel indicator colors */
  .case-sheet-panel[data-case-id="case1"] .case-carousel-indicator{
    background: rgba(255, 255, 255, 0.8);
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.6), 0 0 24px rgba(255, 255, 255, 0.4);
  }
  
  .case-sheet-panel[data-case-id="case2"] .case-carousel-indicator{
    background: rgba(64, 224, 208, 0.8);
    box-shadow: 0 0 12px rgba(64, 224, 208, 0.6), 0 0 24px rgba(64, 224, 208, 0.4);
  }
  
  .case-sheet-panel[data-case-id="case3"] .case-carousel-indicator{
    background: rgba(224, 64, 171, 0.8);
    box-shadow: 0 0 12px rgba(224, 64, 171, 0.6), 0 0 24px rgba(224, 64, 171, 0.4);
  }
  
  /* Case 4: Blue carousel indicator */
  .case-sheet-panel[data-case-id="case4"] .case-carousel-indicator{
    background: rgba(64, 150, 255, 0.8);
    box-shadow: 0 0 12px rgba(64, 150, 255, 0.6), 0 0 24px rgba(64, 150, 255, 0.4);
  }
  
  /* --- Case 5 --- */
  .case-sheet-panel[data-case-id="case5"] .case-carousel-indicator{
    background: rgba(255, 165, 0, 0.8);
    box-shadow: 0 0 12px rgba(255, 165, 0, 0.6), 0 0 24px rgba(255, 165, 0, 0.4);
  }
    .case-carousel-indicator.winning{
      width:4px;
      background: var(--ok);
      box-shadow: 0 0 20px var(--ok), 0 0 40px var(--ok), 0 0 60px var(--ok);
      animation: caseWinPulse .5s ease-in-out 3;
    }
    @keyframes caseWinPulse{
      0%,100%{ box-shadow: 0 0 20px var(--ok), 0 0 40px var(--ok); }
      50%{ box-shadow: 0 0 30px var(--ok), 0 0 60px var(--ok), 0 0 80px var(--ok); }
    }
    
    /* Edge gradients */
    .case-carousel::before,
    .case-carousel::after{
      content:"";
      position:absolute;
      top:0; bottom:0;
      width:60px;
      z-index:5;
      pointer-events:none;
    }
    .case-carousel::before{ left:0; background: linear-gradient(90deg, var(--panel) 0%, transparent 100%); }
    .case-carousel::after{ right:0; background: linear-gradient(-90deg, var(--panel) 0%, transparent 100%); }
    
   /* ----------------------------
       Count switch + demo
       ---------------------------- */
       .case-count-section{
        flex-shrink:0;
        padding: 12px 20px 20px;
        display:flex;
        justify-content: flex-start; /* Выравнивание влево */
        align-items:center;
        gap: 16px;
        position: relative;
      }
      
      /* Case image next to demo toggle */
      .case-count-section::after{
        content: '';
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        width: 80px;
        height: 80px;
        background-image: var(--current-case-image, none);
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        filter: drop-shadow(0 8px 16px rgba(0,0,0,0.35));
        opacity: 0.85;
        pointer-events: none;
      }
      
      /* Адаптивные размеры иконки */
      @media (max-width: 500px){
        .case-count-section::after{ 
          width: 70px;
          height: 70px;
        }
      }
      
      @media (max-width: 420px){
        .case-count-section::after{ 
          width: 60px;
          height: 60px;
          right: 16px;
        }
      }
      
      @media (max-width: 360px){
        .case-count-section::after{ 
          width: 50px;
          height: 50px;
          right: 12px;
        }
      }
      
    
    .case-count-switch{
      display:flex;
      gap:8px;
      background: var(--panel);
      padding: 4px;
      border-radius: 12px;
    }
    .case-count-btn{
      width:48px;
      height:36px;
      border-radius: 8px;
      font-size:16px;
      font-weight:700;
      color: var(--muted);
      transition: transform .12s ease, background .2s ease, color .2s ease, box-shadow .2s ease;
    }
    .case-count-btn.active{
      background: var(--accent);
      color:#fff;
      box-shadow: 0 2px 8px rgba(0,166,255,0.40);
    }
    
    /* Case 1: White active button */
    .case-sheet-panel[data-case-id="case1"] .case-count-btn.active{
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.18), rgba(200, 200, 255, 0.15));
      color:#fff;
      box-shadow: 0 2px 8px rgba(255, 255, 255, 0.30);
      border: 1px solid rgba(255, 255, 255, 0.25);
    }
    
    /* Case 2: Turquoise active button */
    .case-sheet-panel[data-case-id="case2"] .case-count-btn.active{
      background: rgba(64, 224, 208, 0.25);
      color:#fff;
      box-shadow: 0 2px 8px rgba(64, 224, 208, 0.40);
    }
    
    /* Case 3: Pink active button */
    .case-sheet-panel[data-case-id="case3"] .case-count-btn.active{
      background: rgba(224, 64, 171, 0.25);
      color:#fff;
      box-shadow: 0 2px 8px rgba(224, 64, 171, 0.40);
    }
  
      /* Case 4: Blue active button */
      .case-sheet-panel[data-case-id="case4"] .case-count-btn.active{
        background: rgba(64, 150, 255, 0.25);
        color:#fff;
        box-shadow: 0 2px 8px rgba(64, 150, 255, 0.40);
      }
  
      /* Case 5: Orange active button */      
      .case-sheet-panel[data-case-id="case5"] .case-count-btn.active{
        background: rgba(255, 165, 0, 0.25);
        color:#fff;
        box-shadow: 0 2px 8px rgba(255, 165, 0, 0.40);
      }
  
    .case-count-btn:active{ transform: scale(0.96); }
    
    .case-demo-toggle{
      display:flex;
      align-items:center;
      gap:8px;
      background: var(--panel);
      padding: 6px 12px 6px 14px;
      border-radius: 999px;
      border: 1px solid var(--border);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .case-demo-toggle.active{
      background: rgba(39, 201, 63, 0.15);
      border-color: var(--ok);
    }
    .case-demo-label{
      font-size:12px;
      font-weight:600;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing:.5px;
    }
    .case-demo-toggle.active .case-demo-label{ color: var(--ok); }
    
    .case-demo-switch{
      width:32px;
      height:18px;
      background: var(--border);
      border-radius: 999px;
      position:relative;
      transition: background .2s ease;
    }
    .case-demo-toggle.active .case-demo-switch{ background: var(--ok); }
    .case-demo-switch::after{
      content:"";
      position:absolute;
      top:2px; left:2px;
      width:14px; height:14px;
      background:#fff;
      border-radius:999px;
      transition: transform .2s ease;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    .case-demo-toggle.active .case-demo-switch::after{ transform: translateX(14px); }
    
    /* ----------------------------
       Contents grid (scroll)
       ---------------------------- */
    .case-contents-section{
      flex:1;
      overflow-y:auto;
      padding: 0 20px 100px;
    }
    .case-contents-title{
      margin: 0 0 16px;
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .5px;
      color: var(--muted);
    }
    .case-contents-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    
    .case-content-item{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      text-align:center;
    }
    .case-content-item img{
      width:100%;
      aspect-ratio: 1;
      object-fit: contain;
      margin-bottom: 8px;
    }
    .case-content-price{
      background: var(--card);
      border-radius: 8px;
      padding: 6px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:4px;
      font-size:12px;
      font-weight:700;
      color: var(--text);
    }
    .case-content-price img{
      width:14px;
      height:14px;
      margin:0;
    }
    
    /* Bottom button */
    .case-bottom-button{
      position:absolute;
      left:0; right:0; bottom:0;
      padding: 16px 20px 20px;
      background: linear-gradient(to top, var(--bg) 80%, transparent);
      border-top: 1px solid var(--border);
      pointer-events:none;
    }
    .case-open-btn{
      width:100%;
      height:52px;
      background: linear-gradient(135deg, var(--accent), #0d68c3);
      border-radius: 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      font-size:17px;
      font-weight:700;
      color:#fff;
      pointer-events: all;
      box-shadow: 0 4px 16px rgba(0,166,255,0.30);
      transition: transform .12s ease;
    }
  
    /* Case 1: White open button */
  .case-sheet-panel[data-case-id="case1"] .case-open-btn{
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.20), rgba(200, 200, 255, 0.18));
    box-shadow: 0 4px 16px rgba(255, 255, 255, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.30);
  }
  
  /* Case 2: Turquoise open button */
  .case-sheet-panel[data-case-id="case2"] .case-open-btn{
    background: linear-gradient(135deg, rgba(64, 224, 208, 0.35), rgba(32, 180, 168, 0.30));
    box-shadow: 0 4px 16px rgba(64, 224, 208, 0.30);
  }
  
  /* Case 3: Pink open button */
  .case-sheet-panel[data-case-id="case3"] .case-open-btn{
    background: linear-gradient(135deg, rgba(224, 64, 171, 0.35), rgba(200, 40, 150, 0.30));
    box-shadow: 0 4px 16px rgba(224, 64, 171, 0.30);
  }
  
  /* Case 4: Blue open button */
  .case-sheet-panel[data-case-id="case4"] .case-open-btn{
    background: linear-gradient(135deg, rgba(64, 150, 255, 0.35), rgba(40, 120, 220, 0.30));
    box-shadow: 0 4px 16px rgba(64, 150, 255, 0.30);
  }
  
  /* Case 5: Orange open button */
  .case-sheet-panel[data-case-id="case5"] .case-open-btn{
    background: linear-gradient(135deg, rgba(255, 165, 0, 0.35), rgba(255, 140, 0, 0.30));
    box-shadow: 0 4px 16px rgba(255, 165, 0, 0.30);
  }
  
    .case-open-btn:active{ transform: scale(0.99); }
    
    .case-open-btn.demo-mode{
      background: linear-gradient(135deg, var(--ok), #1a9f2f);
      box-shadow: 0 4px 16px rgba(39,201,63,0.30);
    }
    .case-open-price{
      display:flex;
      align-items:center;
      gap:6px;
    }
    .case-open-price img{ width:18px; height:18px; }
    .case-open-btn.demo-mode .case-open-price img{ display:none; }
    
    
    /* --- OVERLAY CONTAINER --- */
    .case-win-overlay,
    #caseWinOverlay{
      position: fixed;
      inset: 0;
      z-index: 2700;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity: 0;
      transform: scale(0.92);
      transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1), 
                  transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events:none;
    }
    .case-win-overlay.show,
    #caseWinOverlay.show{
      opacity: 1;
      transform: scale(1);
      pointer-events: auto;
    }
    .case-win-overlay.hide,
    #caseWinOverlay.hide{
      opacity: 0;
      transform: scale(0.92);
      pointer-events: none;
    }
    
    /* --- CARD CONTAINER --- */
    .case-win-card{
      width: min(86vw, 360px);
      height: auto;
      aspect-ratio: auto;
      border-radius: 22px;
      background: rgba(18, 22, 30, 0.92);
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: 0 18px 60px rgba(0,0,0,0.60);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      gap: 14px;
      padding: 18px 16px;
      backdrop-filter: blur(10px);
    }
    
    /* --- MEDIA AND VALUE CONTAINERS --- */
    .case-win-media{
      width:100%;
      display:block;
    }
    .case-win-value:empty{ display:none; }
    
    /* ============================================
       НОВАЯ СТРУКТУРА УВЕДОМЛЕНИЯ О ВЫИГРЫШЕ
       ============================================ */
    
    /* --- ONE CASE: Large centered gift --- */
    .case-win-single {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px 0;
    }
    
    .case-win-single .case-win-gift {
      width: clamp(200px, 60vw, 260px);
      aspect-ratio: 1 / 1;
    }
    
    /* --- TWO CASES: Side by side --- */
    .case-win-double {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      padding: 12px 0;
    }
    
    .case-win-double .case-win-gift {
      width: 100%;
      aspect-ratio: 1 / 1;
    }
    
    /* --- THREE CASES: Grid layout --- */
    .case-win-triple {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      padding: 12px 0;
    }
    
    .case-win-triple .case-win-gift {
      width: 100%;
      aspect-ratio: 1 / 1;
    }
    
    /* --- GIFT CONTAINER (universal) --- */
    .case-win-gift {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .case-win-gift__bg {
      position: absolute;
      inset: 0;
      background: radial-gradient(
        circle at 50% 42%, 
        rgba(0, 166, 255, 0.22), 
        rgba(0, 166, 255, 0.06) 60%, 
        rgba(0, 0, 0, 0) 100%
      );
      box-shadow:
        inset 0 0 0 1px rgba(0, 166, 255, 0.28),
        inset 0 -18px 40px rgba(0, 0, 0, 0.35);
    }
    
    .case-win-gift img {
      width: 75%;
      height: 75%;
      object-fit: contain;
      position: relative;
      z-index: 1;
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.4));
    }
    
    /* --- TILE (for multiple gifts) --- */
    .case-win-tile {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .case-win-label {
      font-size: 11px;
      font-weight: 600;
      opacity: 0.6;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    /* Hide label for single gift */
    .case-win-single .case-win-label {
      display: none;
    }
    
    /* --- TOTAL VALUE (bottom section) --- */
    .case-win-total {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 8px;
      padding: 16px;
      background: rgba(0, 166, 255, 0.08);
      border-radius: 14px;
      border: 1px solid rgba(0, 166, 255, 0.15);
    }
    
    .case-win-plus {
      font-size: 32px;
      font-weight: 900;
      color: #00ff88;
      text-shadow: 0 2px 8px rgba(0, 255, 136, 0.3);
    }
    
    .case-win-icon {
      width: 28px;
      height: 28px;
      object-fit: contain;
      flex-shrink: 0;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }
    
    /* --- MORE GIFTS INDICATOR --- */
    .case-win-more {
      width: 100%;
      text-align: center;
      padding: 12px;
      margin-top: 8px;
      font-size: 13px;
      font-weight: 600;
      opacity: 0.7;
      color: rgba(255, 255, 255, 0.8);
    }
    
    /* --- VALUE CONTAINER --- */
    .case-win-value {
      width: 100%;
    }
    
    /* ============================================
       CASE WIN CARD STRUCTURE
       ============================================ */
    
    /* --- RESPONSIVE ADJUSTMENTS --- */
    @media (max-width: 390px) {
      .case-win-card{ 
        width: min(90vw, 340px); 
      }
      
      .case-win-single .case-win-gift {
        width: clamp(180px, 55vw, 240px);
      }
      
      .case-win-double {
        gap: 12px;
      }
      
      .case-win-triple {
        gap: 8px;
      }
      
      .case-win-plus {
        font-size: 28px;
      }
      
      .case-win-icon {
        width: 24px;
        height: 24px;
      }
    }
    
    
    /* ===== CASES: максимально видно, что именно выпало ===== */
    
    /* базовый тайл — гарантируем, что он relative */
    .case-carousel-item{
      position: relative;
      border-radius: 12px;
      overflow: hidden;
    }
    
    /* лёгкий фон по умолчанию */
    .case-carousel-item::before{
      content:'';
      position:absolute;
      inset:0;
      background: rgba(255,255,255,0.02);
      pointer-events:none;
    }
    
    /* когда спин закончился — приглушаем все слоты */
    .case-carousel.cases-finished .case-carousel-item{
      opacity: 0.35;
      transform: scale(0.92);
      filter: grayscale(0.6);
    }
    
    /* ВЫИГРЫШНЫЙ слот: яркий, крупный, с подсветкой */
    /* ВЫИГРЫШНЫЙ слот: яркий, крупный, с подсветкой */
  .case-carousel.cases-finished .case-carousel-item.winning{
    opacity: 1;
    transform: scale(1.10);
    filter: none;
    box-shadow:
      0 0 0 2px rgba(0,166,255,0.95),
      0 0 26px rgba(0,166,255,0.90);
  }
  
  /* Case 1: White winning item */
  .case-sheet-panel[data-case-id="case1"] .case-carousel.cases-finished .case-carousel-item.winning{
    box-shadow:
      0 0 0 2px rgba(255, 255, 255, 0.95),
      0 0 26px rgba(255, 255, 255, 0.90);
  }
  
  /* Case 2: Turquoise winning item */
  .case-sheet-panel[data-case-id="case2"] .case-carousel.cases-finished .case-carousel-item.winning{
    box-shadow:
      0 0 0 2px rgba(64, 224, 208, 0.95),
      0 0 26px rgba(64, 224, 208, 0.90);
  }
  
  /* Case 3: Pink winning item */
  .case-sheet-panel[data-case-id="case3"] .case-carousel.cases-finished .case-carousel-item.winning{
    box-shadow:
      0 0 0 2px rgba(224, 64, 171, 0.95),
      0 0 26px rgba(224, 64, 171, 0.90);
  }
  
  /* Case 4: Blue winning item */
  .case-sheet-panel[data-case-id="case4"] .case-carousel.cases-finished .case-carousel-item.winning{
    box-shadow:
      0 0 0 2px rgba(64, 150, 255, 0.95),
      0 0 26px rgba(64, 150, 255, 0.90);
  }
  /* Case 5: Orange winning item */
  .case-sheet-panel[data-case-id="case5"] .case-carousel.cases-finished .case-carousel-item.winning{
    box-shadow:
      0 0 0 2px rgba(255, 165, 0, 0.95),
      0 0 26px rgba(255, 165, 0, 0.90);
  }
    
  .case-carousel.cases-finished .case-carousel-item.winning::before{
    background: radial-gradient(
      circle at 50% 40%,
      rgba(0,166,255,0.45),
      rgba(0,166,255,0.16) 55%,
      rgba(0,0,0,0.90) 100%
    );
  }
  
  /* Case 1: White gradient */
  .case-sheet-panel[data-case-id="case1"] .case-carousel.cases-finished .case-carousel-item.winning::before{
    background: radial-gradient(
      circle at 50% 40%,
      rgba(255, 255, 255, 0.35),
      rgba(255, 255, 255, 0.12) 55%,
      rgba(0,0,0,0.90) 100%
    );
  }
  
  /* Case 2: Turquoise gradient */
  .case-sheet-panel[data-case-id="case2"] .case-carousel.cases-finished .case-carousel-item.winning::before{
    background: radial-gradient(
      circle at 50% 40%,
      rgba(64, 224, 208, 0.45),
      rgba(64, 224, 208, 0.16) 55%,
      rgba(0,0,0,0.90) 100%
    );
  }
  
  /* Case 3: Pink gradient */
  .case-sheet-panel[data-case-id="case3"] .case-carousel.cases-finished .case-carousel-item.winning::before{
    background: radial-gradient(
      circle at 50% 40%,
      rgba(224, 64, 171, 0.45),
      rgba(224, 64, 171, 0.16) 55%,
      rgba(0,0,0,0.90) 100%
    );
  }
  
  /* Case 4: Blue gradient */
  .case-sheet-panel[data-case-id="case4"] .case-carousel.cases-finished .case-carousel-item.winning::before{
    background: radial-gradient(
      circle at 50% 40%,
      rgba(64, 150, 255, 0.45),
      rgba(64, 150, 255, 0.16) 55%,
      rgba(0,0,0,0.90) 100%
    );
  }
  
  /* Case 5: Orange gradient */
  .case-sheet-panel[data-case-id="case5"] .case-carousel.cases-finished .case-carousel-item.winning::before{
    background: radial-gradient(
      circle at 50% 40%,
      rgba(255, 165, 0, 0.45),
      rgba(255, 165, 0, 0.16) 55%,
      rgba(0,0,0,0.90) 100%
    );
  }
    
    /* PNG внутри приза чуть крупнее */
    .case-carousel.cases-finished .case-carousel-item.winning img{
      transform: scale(1.06);
      transition: transform .18s ease;
    }
    
    /* ===== CASES: Claim bar under carousels ===== */
    .case-claim-bar{
      padding: 10px 14px 6px;
    }
    
    .case-claim-btn{
      width: 100%;
      height: 44px;
      border: 0;
      border-radius: 14px;
      background: linear-gradient(180deg, #2aa8ff 0%, #118cff 100%);
      color: #fff;
      font-weight: 900;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      cursor: pointer;
      box-shadow: 0 10px 22px rgba(17, 140, 255, 0.18);
      -webkit-tap-highlight-color: transparent;
    }
    
    .case-claim-btn:active{ transform: translateY(1px); }
    
    .case-claim-btn__icon{
      width: 20px;
      height: 20px;
      display: block;
    }
    
    .case-claim-btn__amount{
      font-variant-numeric: tabular-nums;
    }
    
    .case-claim-btn.loading{
      opacity: 0.8;
      pointer-events: none;
    }
    
    /* Layout: left Claim (gifts) + right NFT actions block */
    .case-claim-row{
      display: flex;
      gap: 12px;
      align-items: stretch;
    }
    
    .case-claim-row > *{ min-width: 0; }
    
    .case-claim-btn{ flex: 1 1 0; }
    
    .case-nft-actions-inline{
      flex: 1 1 0;
      min-width: 0;
      display: flex;
      gap: 6px;
      align-items: center;
      padding: 4px;
      border-radius: 14px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.10);
    }
    
    .case-nft-btn-inline{
      flex: 1 1 0;
      min-width: 0;
      height: 36px;
      border-radius: 10px;
      border: 0;
      font-weight: 900;
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      white-space: nowrap;
    }
    
    .case-nft-btn-inline:active{ transform: translateY(1px); }
    
    .case-nft-btn-inline--primary{
      background: rgba(42,168,255,0.16);
      border: 1px solid rgba(42,168,255,0.55);
      color: #fff;
    }
    
    .case-nft-btn-inline--secondary{
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.12);
      color: rgba(255,255,255,0.92);
    }
    
    .case-nft-btn-inline__amount{
      font-variant-numeric: tabular-nums;
      opacity: 0.95;
    }
    
    .case-nft-btn-inline__icon{
      width: 18px;
      height: 18px;
      display: block;
    }
    
    @media (max-width: 380px){
      .cases-grid{ 
        gap:10px; 
        padding: 0 10px; 
      }
      
          
      .case-card__title{ 
        font-size:14px; 
      }
      
      .case-claim-row{ gap: 10px; }
      .case-claim-btn{ font-size: 15px; }
      .case-nft-btn-inline{ font-size: 12px; height: 34px; gap: 5px; }
    }
    
    @media (max-width: 330px){
      .case-claim-row{ gap: 8px; }
      .case-claim-btn{ font-size: 14px; }
      .case-nft-actions-inline{ padding: 3px; gap: 5px; }
      .case-nft-btn-inline{ font-size: 11px; height: 32px; }
    }
    
    /* ===== CASES: Win decision panel (save to profile / cash-out) ===== */
    .case-decision-panel{
      padding: 10px 14px 12px;
    }
    
    .case-decision{
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 12px;
      text-align: center;
      box-shadow: 0 18px 40px rgba(0,0,0,0.35);
    }
    
    .case-decision__title{
      font-weight: 900;
      color: rgba(255,255,255,0.95);
      font-size: 16px;
    }
    
    .case-decision__sub{
      margin-top: 4px;
      color: rgba(255,255,255,0.72);
      font-weight: 700;
      font-size: 13px;
    }
    
    .case-decision__items{
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 12px 0 10px;
    }
    
    .case-decision-item{
      width: 76px;
      border-radius: 16px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
      overflow: hidden;
    }
    
    .case-decision-item__imgwrap{
      height: 58px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px;
    }
    
    .case-decision-item__imgwrap img{
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }
    
    .case-decision-item__meta{
      padding: 6px 6px 8px;
    }
    
    .case-decision-item__name{
      font-weight: 900;
      color: rgba(255,255,255,0.9);
      font-size: 12px;
    }
    
    .case-decision-item__rarity{
      margin-top: 2px;
      font-weight: 800;
      color: rgba(255,255,255,0.6);
      font-size: 10px;
      text-transform: uppercase;
    }
    
    .case-decision__actions{
      display: grid;
      gap: 10px;
      margin-top: 8px;
    }
    
    .case-decision-btn{
      width: 100%;
      height: 44px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 14px;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }
    
    .case-decision-btn--primary{
      border: 0;
      background: linear-gradient(180deg, #2aa8ff 0%, #118cff 100%);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 10px 22px rgba(17, 140, 255, 0.18);
    }
    
    .case-decision-btn--secondary{
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.9);
    }
    
    .case-decision-btn:active{ transform: translateY(1px); }
    
    .case-decision-btn__icon{
      width: 18px;
      height: 18px;
      display: block;
    }
    
    .case-decision-btn__amount{
      font-variant-numeric: tabular-nums;
    }
    
    .case-decision-btn.loading{
      opacity: 0.85;
      pointer-events: none;
    }
    
    .case-decision__note{
      margin-top: 10px;
      color: rgba(255,255,255,0.65);
      font-weight: 700;
      font-size: 12px;
    }
    
    
    
    
    
    
    
    /* FIX: winner highlight (зелёная обводка как раньше) */
    .case-carousel-item{
      position: relative; /* важно для ::before/::after */
      border-radius: 14px;
      overflow: hidden;
    }
    
    .case-carousel.cases-finished .case-carousel-item.winning{
      box-shadow:
        0 0 0 2px var(--ok),
        0 0 26px rgba(39, 201, 63, 0.65);
    }
    
    .case-carousel-item.winning::before{
      background: rgba(39, 201, 63, 0.14);
      box-shadow: inset 0 0 0 1px rgba(39, 201, 63, 0.25);
    }
    .case-carousel-items { overflow: visible; }
    
    .case-carousel-item { position: relative; }
    
    .case-carousel-item.winning { z-index: 10; }
    
    
    /* ===== CASES: Center square (the "winner box") ===== */
  
  .case-carousel-centerbox{
    position: absolute;
    top: 8px;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    aspect-ratio: 1 / 1;
  
    border-radius: 14px;
    pointer-events: none;
    z-index: 9;
  
    /* default (blue) */
    background: rgba(0, 166, 255, 0.06);
    box-shadow:
      0 0 0 2px rgba(0, 166, 255, 0.55),
      0 0 26px rgba(0, 166, 255, 0.25);
  }
  
  /* Case 1: White centerbox */
  .case-sheet-panel[data-case-id="case1"] .case-carousel-centerbox{
    background: rgba(255, 255, 255, 0.06);
    box-shadow:
      0 0 0 2px rgba(255, 255, 255, 0.55),
      0 0 26px rgba(255, 255, 255, 0.25);
  }
  
  /* Case 2: Turquoise centerbox */
  .case-sheet-panel[data-case-id="case2"] .case-carousel-centerbox{
    background: rgba(64, 224, 208, 0.06);
    box-shadow:
      0 0 0 2px rgba(64, 224, 208, 0.55),
      0 0 26px rgba(64, 224, 208, 0.25);
  }
  
  /* Case 3: Pink centerbox */
  .case-sheet-panel[data-case-id="case3"] .case-carousel-centerbox{
    background: rgba(224, 64, 171, 0.06);
    box-shadow:
      0 0 0 2px rgba(224, 64, 171, 0.55),
      0 0 26px rgba(224, 64, 171, 0.25);
  }
  
  /* Case 4: Blue centerbox */
  .case-sheet-panel[data-case-id="case4"] .case-carousel-centerbox{
    background: rgba(64, 150, 255, 0.06);
    box-shadow:
      0 0 0 2px rgba(64, 150, 255, 0.55),
      0 0 26px rgba(64, 150, 255, 0.25);
  }
  
  /* --- Case 4: Orange centerbox--- */
  .case-sheet-panel[data-case-id="case5"] .case-carousel-centerbox{
    background: rgba(255, 165, 0, 0.06);
    box-shadow:
      0 0 0 2px rgba(255, 165, 0, 0.55),
      0 0 26px rgba(255, 165, 0, 0.25);
  }
    
    /* becomes green when stopped */
    .case-carousel-centerbox.winning{
      background: rgba(39, 201, 63, 0.07);
      box-shadow:
        0 0 0 2px rgba(39, 201, 63, 0.9),
        0 0 32px rgba(39, 201, 63, 0.35);
    }
    
    
    /* ===========================
       Cases: smoother spin + item numbers
       =========================== */
    
    /* чуть мягче на мобильных при частых translate */
    .case-carousel-items{
      transform: translate3d(0,0,0);
      will-change: transform;
    }
    
    /* чтобы номер позиционировался поверх карточки */
    .case-carousel-item,
    .case-content-item{
      position: relative;
    }
    
    /* если секция с контентом реально скроллится */
    .case-contents-section{
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }
    
    .case-item-num-badge{ 
      display:none !important; 
    }
    
    /* Подсветка NFT только в CONTENTS  */
    
  .case-contents-grid .case-content-item[data-item-type="nft"]{
    border-color: rgba(0,166,255,.55);
    box-shadow:
      0 0 0 1px rgba(0,166,255,.22),
      0 10px 24px rgba(0,166,255,.10);
    background:
      radial-gradient(220px 120px at 50% -40px, rgba(0,166,255,.18) 0%, rgba(0,166,255,0) 60%),
      var(--panel);
  }
  
  /* Case 1: White NFT highlight */
  .case-sheet-panel[data-case-id="case1"] .case-contents-grid .case-content-item[data-item-type="nft"]{
    border-color: rgba(255, 255, 255, .55);
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, .22),
      0 10px 24px rgba(255, 255, 255, .10);
    background:
      radial-gradient(220px 120px at 50% -40px, rgba(255, 255, 255, .18) 0%, rgba(255, 255, 255, 0) 60%),
      var(--panel);
  }
  
  /* Case 2: Turquoise NFT highlight */
  .case-sheet-panel[data-case-id="case2"] .case-contents-grid .case-content-item[data-item-type="nft"]{
    border-color: rgba(64, 224, 208, .55);
    box-shadow:
      0 0 0 1px rgba(64, 224, 208, .22),
      0 10px 24px rgba(64, 224, 208, .10);
    background:
      radial-gradient(220px 120px at 50% -40px, rgba(64, 224, 208, .18) 0%, rgba(64, 224, 208, 0) 60%),
      var(--panel);
  }
  
  /* Case 3: Pink NFT highlight */
  .case-sheet-panel[data-case-id="case3"] .case-contents-grid .case-content-item[data-item-type="nft"]{
    border-color: rgba(224, 64, 171, .55);
    box-shadow:
      0 0 0 1px rgba(224, 64, 171, .22),
      0 10px 24px rgba(224, 64, 171, .10);
    background:
      radial-gradient(220px 120px at 50% -40px, rgba(224, 64, 171, .18) 0%, rgba(224, 64, 171, 0) 60%),
      var(--panel);
  }
  
  /* Case 4: Blue NFT highlight */
  .case-sheet-panel[data-case-id="case4"] .case-contents-grid .case-content-item[data-item-type="nft"]{
    border-color: rgba(64, 150, 255, .55);
    box-shadow:
      0 0 0 1px rgba(64, 150, 255, .22),
      0 10px 24px rgba(64, 150, 255, .10);
    background:
      radial-gradient(220px 120px at 50% -40px, rgba(64, 150, 255, .18) 0%, rgba(64, 150, 255, 0) 60%),
      var(--panel);
  }
  
  /* Case 5: Orange NFT highlight */
  .case-sheet-panel[data-case-id="case5"] .case-contents-grid .case-content-item[data-item-type="nft"]{
    border-color: rgba(255, 165, 0, .55);
    box-shadow:
      0 0 0 1px rgba(255, 165, 0, .22),
      0 10px 24px rgba(255, 165, 0, .10);
    background:
      radial-gradient(220px 120px at 50% -40px, rgba(255, 165, 0, .18) 0%, rgba(255, 165, 0, 0) 60%),
      var(--panel);
  }
  
  
    
    /* гарантируем, что hidden реально скрывает панель */
    .case-decision-panel[hidden] { display: none !important; }
    
    /* ===== CASES: Win decision panel (save to profile / cash-out) ===== */
    .case-decision-panel{
      padding: 10px 14px 12px;
    }
    
    .case-decision{
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 12px;
      text-align: center;
      box-shadow: 0 18px 40px rgba(0,0,0,0.35);
    }
    
    .case-decision__title{
      font-weight: 900;
      color: rgba(255,255,255,0.95);
      font-size: 16px;
    }
    
    .case-decision__sub{
      margin-top: 4px;
      color: rgba(255,255,255,0.72);
      font-weight: 700;
      font-size: 13px;
    }
    
    .case-decision__items{
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 12px 0 10px;
    }
    
    .case-decision-item{
      width: 76px;
      border-radius: 16px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
      overflow: hidden;
    }
    
    .case-decision-item__imgwrap{
      height: 58px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px;
    }
    
    .case-decision-item__imgwrap img{
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }
    
    .case-decision-item__meta{
      padding: 6px 6px 8px;
    }
    
    .case-decision-item__name{
      font-weight: 900;
      color: rgba(255,255,255,0.9);
      font-size: 12px;
    }
    
    .case-decision-item__rarity{
      margin-top: 2px;
      font-weight: 800;
      color: rgba(255,255,255,0.6);
      font-size: 10px;
      text-transform: uppercase;
    }
    
    .case-decision__actions{
      display: grid;
      gap: 10px;
      margin-top: 8px;
    }
    
    .case-decision-btn{
      width: 100%;
      height: 44px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 14px;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }
    
    .case-decision-btn--primary{
      border: 0;
      background: linear-gradient(180deg, #2aa8ff 0%, #118cff 100%);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 10px 22px rgba(17, 140, 255, 0.18);
    }
    
    .case-decision-btn--secondary{
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.9);
    }
    
    .case-decision-btn:active{ transform: translateY(1px); }
    
    .case-decision-btn__icon{
      width: 18px;
      height: 18px;
      display: block;
    }
    
    .case-decision-btn__amount{
      font-variant-numeric: tabular-nums;
    }
    
    .case-decision-btn.loading{
      opacity: 0.85;
      pointer-events: none;
    }
    
    .case-decision__note{
      margin-top: 10px;
      color: rgba(255,255,255,0.65);
      font-weight: 700;
      font-size: 12px;
    }
    
    
    
    
    
    
    
            
    
            
         /* ============================================
     CASE-SPECIFIC UI COLORS
     ============================================ */
  
  /* ----- CASE 1: WHITE THEME ----- */
  
  /* Panel backgrounds */
  .case-sheet-panel[data-case-id="case1"] .case-carousel{
    background: rgba(255, 255, 255, 0.04);
    border-color: rgba(255, 255, 255, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case1"] .case-count-switch{
    background: rgba(255, 255, 255, 0.06);
  }
  
  .case-sheet-panel[data-case-id="case1"] .case-demo-toggle{
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case1"] .case-content-item{
    background: rgba(255, 255, 255, 0.04);
    border-color: rgba(255, 255, 255, 0.10);
  }
  
  .case-sheet-panel[data-case-id="case1"] .case-content-price{
    background: rgba(255, 255, 255, 0.06);
  }
  
  /* Edge gradients for carousel */
  .case-sheet-panel[data-case-id="case1"] .case-carousel::before{
    background: linear-gradient(90deg, var(--bg) 0%, transparent 100%);
  }
  
  .case-sheet-panel[data-case-id="case1"] .case-carousel::after{
    background: linear-gradient(-90deg, var(--bg) 0%, transparent 100%);
  }
  
  /* ----- CASE 2: TURQUOISE THEME ----- */
  
  /* Panel backgrounds */
  .case-sheet-panel[data-case-id="case2"] .case-carousel{
    background: rgba(64, 224, 208, 0.04);
    border-color: rgba(64, 224, 208, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case2"] .case-count-switch{
    background: rgba(64, 224, 208, 0.06);
  }
  
  .case-sheet-panel[data-case-id="case2"] .case-demo-toggle{
    background: rgba(64, 224, 208, 0.06);
    border-color: rgba(64, 224, 208, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case2"] .case-content-item{
    background: rgba(64, 224, 208, 0.04);
    border-color: rgba(64, 224, 208, 0.10);
  }
  
  .case-sheet-panel[data-case-id="case2"] .case-content-price{
    background: rgba(64, 224, 208, 0.06);
  }
  
  /* Edge gradients for carousel */
  .case-sheet-panel[data-case-id="case2"] .case-carousel::before{
    background: linear-gradient(90deg, var(--bg) 0%, transparent 100%);
  }
  
  .case-sheet-panel[data-case-id="case2"] .case-carousel::after{
    background: linear-gradient(-90deg, var(--bg) 0%, transparent 100%);
  }
  
  /* ----- CASE 3: PINK THEME ----- */
  
  /* Panel backgrounds */
  .case-sheet-panel[data-case-id="case3"] .case-carousel{
    background: rgba(224, 64, 171, 0.04);
    border-color: rgba(224, 64, 171, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case3"] .case-count-switch{
    background: rgba(224, 64, 171, 0.06);
  }
  
  .case-sheet-panel[data-case-id="case3"] .case-demo-toggle{
    background: rgba(224, 64, 171, 0.06);
    border-color: rgba(224, 64, 171, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case3"] .case-content-item{
    background: rgba(224, 64, 171, 0.04);
    border-color: rgba(224, 64, 171, 0.10);
  }
  
  .case-sheet-panel[data-case-id="case3"] .case-content-price{
    background: rgba(224, 64, 171, 0.06);
  }
  
  /* Edge gradients for carousel */
  .case-sheet-panel[data-case-id="case3"] .case-carousel::before{
    background: linear-gradient(90deg, var(--bg) 0%, transparent 100%);
  }
  
  .case-sheet-panel[data-case-id="case3"] .case-carousel::after{
    background: linear-gradient(-90deg, var(--bg) 0%, transparent 100%);
  }
  
  
  
  
  /* ----- CASE 4: BLUE THEME ----- */
  
  /* Panel backgrounds */
  .case-sheet-panel[data-case-id="case4"] .case-carousel{
    background: rgba(64, 150, 255, 0.04);
    border-color: rgba(64, 150, 255, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case4"] .case-count-switch{
    background: rgba(64, 150, 255, 0.06);
  }
  
  .case-sheet-panel[data-case-id="case4"] .case-demo-toggle{
    background: rgba(64, 150, 255, 0.06);
    border-color: rgba(64, 150, 255, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case4"] .case-content-item{
    background: rgba(64, 150, 255, 0.04);
    border-color: rgba(64, 150, 255, 0.10);
  }
  
  .case-sheet-panel[data-case-id="case4"] .case-content-price{
    background: rgba(64, 150, 255, 0.06);
  }
  
  /* Edge gradients for carousel */
  .case-sheet-panel[data-case-id="case4"] .case-carousel::before{
    background: linear-gradient(90deg, var(--bg) 0%, transparent 100%);
  }
  
  .case-sheet-panel[data-case-id="case4"] .case-carousel::after{
    background: linear-gradient(-90deg, var(--bg) 0%, transparent 100%);
  }
  
  
  
  
  /* ----- CASE 5: ORANGE THEME ----- */
  
  .case-sheet-panel[data-case-id="case5"] .case-carousel{
    background: rgba(255, 165, 0, 0.04);
    border-color: rgba(255, 165, 0, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case5"] .case-count-switch{
    background: rgba(255, 165, 0, 0.06);
  }
  
  .case-sheet-panel[data-case-id="case5"] .case-demo-toggle{
    background: rgba(255, 165, 0, 0.06);
    border-color: rgba(255, 165, 0, 0.12);
  }
  
  .case-sheet-panel[data-case-id="case5"] .case-content-item{
    background: rgba(255, 165, 0, 0.04);
    border-color: rgba(255, 165, 0, 0.10);
  }
  
  .case-sheet-panel[data-case-id="case5"] .case-content-price{
    background: rgba(255, 165, 0, 0.06);
  }
  
  /* Edge gradients for carousel */
  .case-sheet-panel[data-case-id="case5"] .case-carousel::before{
    background: linear-gradient(90deg, var(--bg) 0%, transparent 100%);
  }
  
  .case-sheet-panel[data-case-id="case5"] .case-carousel::after{
    background: linear-gradient(-90deg, var(--bg) 0%, transparent 100%);
  }
  
  /* ----- INACTIVE COUNT BUTTONS ----- */
  
  /* Case 1: White inactive buttons */
  .case-sheet-panel[data-case-id="case1"] .case-count-btn:not(.active){
    color: rgba(255, 255, 255, 0.5);
  }
  
  /* Case 2: Turquoise inactive buttons */
  .case-sheet-panel[data-case-id="case2"] .case-count-btn:not(.active){
    color: rgba(64, 224, 208, 0.5);
  }
  
  /* Case 3: Pink inactive buttons */
  .case-sheet-panel[data-case-id="case3"] .case-count-btn:not(.active){
    color: rgba(224, 64, 171, 0.5);
  }
  
  /* Case 4: Blue inactive buttons */
  .case-sheet-panel[data-case-id="case4"] .case-count-btn:not(.active){
    color: rgba(64, 150, 255, 0.5);
  }
  
  /* Case 5: Orange inactive buttons */
  .case-sheet-panel[data-case-id="case5"] .case-count-btn:not(.active){
    color: rgba(255, 165, 0, 0.5);
  }
  
  /* Фиксируем баланс при открытой панели кейсов */
  body.case-sheet-open .balance {
    position: fixed;
    top: 93px;
    right: -2px;
    z-index: 2300;
    background: rgba(10, 14, 39, 0.95);
    backdrop-filter: blur(10px);
    padding: 8px 12px;
    border-radius: 999px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  }
  
  /* Скрываем topbar полностью (убираем блюр панель) */
  body.case-sheet-open .topbar {
    opacity: 0;
    pointer-events: none;
  }
  
  /* Скрываем остальные элементы topbar */
  body.case-sheet-open .topbar__left {
    opacity: 0;
    pointer-events: none;
  }
  
  body.case-sheet-open .logo-header {
    opacity: 0;
    pointer-events: none;
  }
  
  
  /* FIX: на маленьких экранах не даём карточке быть квадратом,
     иначе обрезает title/price */
     @media (max-width: 420px){
      .case-card{
        aspect-ratio: auto !important;
        height: auto !important;
      }
    
      /* принудительно показываем инфо и цену */
      .case-card__info{ 
        display: flex !important;
      }
      .case-card__price{
        display: flex !important;
      }
    
      /* делаем картинку аккуратнее */
      .case-card__image{
        aspect-ratio: 1 / 1;
        padding: 14px;
      }
      .case-img{
        object-fit: contain !important;
        display: block;
      }
    }