/* =========================================================
   BONUS 50/50 ‚Äî UPDATED DESIGN (Blue vs Pink Energy)
   
   ========================================================= */

/* =========================================================
   –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –ö–ù–û–ü–ö–ê "–ù–ê–ó–ê–î" –î–õ–Ø –í–°–ï–• –ë–û–ù–£–°–û–í
   ========================================================= */

/* 
 * CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∑–∏—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏:
 * --back-btn-top: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20px)
 * --back-btn-left: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20px)
 * 
 * –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é:
 * 1. –í —ç—Ç–æ–º —Ñ–∞–π–ª–µ –∏–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ :root
 * 2. –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç–∏–ª–∏ –≤ —Å–≤–æ–π CSS:
 *    .universal-back-btn { --back-btn-top: 30px; --back-btn-left: 30px; }
 */

 :root {
  --back-btn-top: 100px;    /* –ò–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —á—Ç–æ–±—ã –æ–ø—É—Å—Ç–∏—Ç—å/–ø–æ–¥–Ω—è—Ç—å –∫–Ω–æ–ø–∫—É */
  --back-btn-left: 20px;   /* –ò–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —á—Ç–æ–±—ã —Å–¥–≤–∏–Ω—É—Ç—å –∫–Ω–æ–ø–∫—É –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ */
}

.universal-back-btn {
  /* –ü–æ–∑–∏—Ü–∏—è - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */
  position: fixed;
  top: var(--back-btn-top);
  left: var(--back-btn-left);
  z-index: 1000000;
  
  /* –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ */
  display: flex !important; /* !important —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å */
  align-items: center;
  justify-content: center;
  gap: 10px;
  
  min-width: 48px;
  height: 48px;
  padding: 0 16px;
  
  /* –°—Ç–µ–∫–ª—è–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç */
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 14px;
  
  /* –¢–µ–∫—Å—Ç –∏ –∏–∫–æ–Ω–∫–∞ */
  color: #ffffff;
  font-size: 17px;
  font-weight: 600;
  
  /* –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å */
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  
  /* –ê–Ω–∏–º–∞—Ü–∏—è */
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  opacity: 0;
  transform: translateX(-10px);
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
#bonus5050Overlay.bonus-overlay--active .universal-back-btn,
.wt-overlay.wt-active .universal-back-btn,
.bonus-overlay--active .universal-back-btn {
  opacity: 1;
  transform: translateX(0);
  animation: universalBackSlideIn 0.4s ease 0.2s backwards;
}

@keyframes universalBackSlideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* –ò–∫–æ–Ω–∫–∞ —Å—Ç—Ä–µ–ª–∫–∏ */
.universal-back-btn svg {
  width: 22px;
  height: 22px;
  flex-shrink: 0;
}

/* –¢–µ–∫—Å—Ç "Back" */
.universal-back-text {
  pointer-events: none;
  user-select: none;
}

/* Hover —ç—Ñ—Ñ–µ–∫—Ç */
.universal-back-btn:hover {
  background: rgba(0, 0, 0, 0.75);
  border-color: rgba(255, 255, 255, 0.25);
  transform: translateX(0) scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Active (–Ω–∞–∂–∞—Ç–∏–µ) */
.universal-back-btn:active {
  transform: translateX(0) scale(0.95);
  background: rgba(0, 0, 0, 0.85);
}

/* –ê–¥–∞–ø—Ç–∏–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
  .universal-back-btn {
    /* –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã */
    min-width: 44px;
    height: 44px;
    padding: 0 14px;
    font-size: 16px;
  }
  
  .universal-back-btn svg {
    width: 20px;
    height: 20px;
  }
}

/* –°–∫—Ä—ã—Ç–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
@media (max-width: 380px) {
  .universal-back-text {
    display: none;
  }
  
  .universal-back-btn {
    padding: 0;
    width: 44px;
    min-width: 44px;
  }
}

/* Lock scroll during cutscene */
html.bonus-active,
body.bonus-active{
  height: 100%;
  overflow: hidden;
}
body.bonus-active{
  position: fixed;
  left: 0; right: 0;
}

/* Overlay */
#bonus5050Overlay.bonus-overlay{
  position: fixed;
  inset: 0;
  z-index: 999999;
  display: none;
  align-items: center;
  justify-content: center;

  opacity: 0;
  pointer-events: none;
  transition: opacity 240ms ease;
}
#bonus5050Overlay.bonus-overlay.bonus-overlay--active{
  opacity: 1;
  pointer-events: auto;
}
#bonus5050Overlay.bonus-overlay.bonus-overlay--leave{
  opacity: 0;
}

/* Backdrop - darker with slight gradient */
#bonus5050Overlay .bonus-overlay__blur-backdrop{
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center,
    rgba(20, 10, 40, 0.75) 0%,
    rgba(10, 5, 25, 0.88) 100%
  );
  backdrop-filter: blur(18px) brightness(0.65) saturate(1.2);
  -webkit-backdrop-filter: blur(18px) brightness(0.65) saturate(1.2);
}

/* Container */
#bonus5050Overlay .bonus-container{
  position: relative;
  z-index: 1;
  width: min(420px, 92vw);
  display: flex;
  align-items: center;
  justify-content: center;

  opacity: 0;
  transform: translateY(14px) scale(0.98);
  transition: opacity 260ms ease, transform 360ms cubic-bezier(0.16,0.84,0.18,1);
}
#bonus5050Overlay.bonus-overlay--active .bonus-container{
  opacity: 1;
  transform: translateY(0) scale(1);
}
#bonus5050Overlay.bonus-overlay--leave .bonus-container{
  opacity: 0;
  transform: translateY(10px) scale(0.985);
  transition: opacity 220ms ease, transform 260ms ease;
}

/* Layout */
.b5050-cutscene{
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

/* Machine */
.b5050-machine{
  position: relative;
  width: min(360px, 88vw);
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

/* Bulbs - —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ñ–µ—Ä—ã */
.b5050-bulbs{
  display: flex;
  justify-content: space-between;
  padding: 0 18px;
  margin: 10px 0;
}
.b5050-bulb{
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: linear-gradient(135deg, #667eea 0%, #e94287 100%);
  box-shadow: 
    0 0 12px rgba(102, 126, 234, 0.6),
    0 0 24px rgba(233, 66, 135, 0.4),
    inset 0 0 8px rgba(255,255,255,0.3);
  opacity: 0.85;
}
#bonus5050Overlay.bonus-overlay--active .b5050-bulb{
  animation: b5050BulbPulse 1400ms ease-in-out infinite;
}
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(2){ animation-delay: 100ms; }
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(3){ animation-delay: 200ms; }
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(4){ animation-delay: 300ms; }
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(5){ animation-delay: 400ms; }
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(6){ animation-delay: 500ms; }
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(7){ animation-delay: 600ms; }
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(8){ animation-delay: 700ms; }
#bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(9){ animation-delay: 800ms; }

@keyframes b5050BulbPulse{
  0%{ 
    opacity: .65; 
    transform: scale(0.96);
    box-shadow: 
      0 0 8px rgba(102, 126, 234, 0.4),
      0 0 16px rgba(233, 66, 135, 0.3);
  }
  50%{ 
    opacity: 1; 
    transform: scale(1.08);
    box-shadow: 
      0 0 18px rgba(102, 126, 234, 0.8),
      0 0 32px rgba(233, 66, 135, 0.6);
  }
  100%{ 
    opacity: .78; 
    transform: scale(0.98);
    box-shadow: 
      0 0 10px rgba(102, 126, 234, 0.5),
      0 0 20px rgba(233, 66, 135, 0.4);
  }
}

/* Dual container */
.b5050-dual{
  position: relative;
  width: min(360px, 88vw);
  display: flex;
  flex-direction: column;
  gap: 18px;
}

/* Unit blocks */
.b5050-unit{ 
  position: relative;
}

/* Frame - —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –≤–º–µ—Å—Ç–æ –∑–æ–ª–æ—Ç–∞ */
.b5050-unitframe{
  position: relative;
  padding: 12px;
  border-radius: 22px;
  background: linear-gradient(
    135deg,
    #4f46e5 0%,
    #7c3aed 25%,
    #db2777 75%,
    #f43f5e 100%
  );
  box-shadow: 
    0 0 0 1px rgba(255, 255, 255, 0.1),
    0 20px 50px rgba(79, 70, 229, 0.3),
    0 20px 50px rgba(219, 39, 119, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* Good unit (blue/purple dominant) */
.b5050-unit--good .b5050-unitframe{
  background: linear-gradient(
    135deg,
    #4f46e5 0%,
    #6366f1 50%,
    #8b5cf6 100%
  );
  box-shadow: 
    0 0 0 1px rgba(255, 255, 255, 0.15),
    0 20px 50px rgba(79, 70, 229, 0.5),
    0 8px 30px rgba(139, 92, 246, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

/* Bad unit (pink/red dominant) */
.b5050-unit--bad .b5050-unitframe{
  background: linear-gradient(
    135deg,
    #ec4899 0%,
    #f43f5e 50%,
    #ef4444 100%
  );
  box-shadow: 
    0 0 0 1px rgba(255, 255, 255, 0.15),
    0 20px 50px rgba(236, 72, 153, 0.5),
    0 8px 30px rgba(244, 63, 94, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

/* Pointers - lightning-styled arrows */
.b5050-pointer{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 0;
  height: 0;
  pointer-events: none;
  z-index: 5;
  will-change: transform;
}

/* Left pointer */
.b5050-pointer--left{
  left: 6px;
  border-top: 18px solid transparent;
  border-bottom: 18px solid transparent;
  border-left: 22px solid #a78bfa;
  filter: drop-shadow(0 0 12px rgba(167, 139, 250, 0.8))
          drop-shadow(0 10px 20px rgba(0,0,0,0.4));
}

/* Right pointer */
.b5050-pointer--right{
  right: 6px;
  border-top: 18px solid transparent;
  border-bottom: 18px solid transparent;
  border-right: 22px solid #f472b6;
  filter: drop-shadow(0 0 12px rgba(244, 114, 182, 0.8))
          drop-shadow(0 10px 20px rgba(0,0,0,0.4));
}

/* Inner notch */
.b5050-pointer--left::after,
.b5050-pointer--right::after{
  content: "";
  position: absolute;
  top: -14px;
  width: 0;
  height: 0;
  border-top: 14px solid transparent;
  border-bottom: 14px solid transparent;
  opacity: .95;
}

.b5050-pointer--left::after{
  left: -19px;
  border-left: 18px solid #1e1b4b;
}
.b5050-pointer--right::after{
  right: -19px;
  border-right: 18px solid #4a1d34;
}

/* Window (drum) - —Ç–µ–º–Ω—ã–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω */
.b5050-window{
  position: relative;
  height: 150px;
  border-radius: 16px;
  overflow: hidden;
  background: linear-gradient(180deg, 
    #0f0a2e 0%, 
    #1a1147 50%,
    #0a0618 100%
  );
  border: 2px solid rgba(139, 92, 246, 0.3);
  box-shadow: 
    inset 0 0 40px rgba(79, 70, 229, 0.15),
    inset 0 0 0 1px rgba(255, 255, 255, 0.05);
}

/* Picked unit glow */
.b5050-unit.is-picked .b5050-window{
  border-color: rgba(167, 139, 250, 0.6);
  box-shadow:
    0 0 0 2px rgba(167, 139, 250, 0.4),
    0 0 40px rgba(167, 139, 250, 0.3),
    inset 0 0 60px rgba(167, 139, 250, 0.12),
    inset 0 0 0 1px rgba(255, 255, 255, 0.1);
}

/* Shading - –¥–æ–±–∞–≤–ª—è–µ–º —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –ø–æ –∫—Ä–∞—è–º */
.b5050-shade{
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
  background: linear-gradient(
    180deg,
    rgba(79, 70, 229, 0.25) 0%,
    rgba(0, 0, 0, 0) 34%,
    rgba(0, 0, 0, 0) 66%,
    rgba(236, 72, 153, 0.25) 100%
  );
}

/* Track */
.b5050-track{
  position: absolute;
  left: 0; right: 0;
  top: 0;
  padding: 14px 18px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  will-change: transform, opacity, filter;
  transform: translate3d(0,0,0);
  z-index: 1;
}

/* Cells - –∑–≤–µ–∑–¥–Ω–∞—è —ç—Å—Ç–µ—Ç–∏–∫–∞ */
.b5050-cell{
  height: 56px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;

  font-weight: 900;
  font-size: 42px;
  letter-spacing: 0.5px;

  color: #fff;
  background: rgba(30, 27, 75, 0.6);
  border: 1px solid rgba(167, 139, 250, 0.3);
  text-shadow: 
    0 0 20px rgba(167, 139, 250, 0.8),
    0 10px 24px rgba(0, 0, 0, 0.6);
  box-shadow: inset 0 0 20px rgba(139, 92, 246, 0.1);
  position: relative;
}

/* –ó–≤–µ–∑–¥–æ—á–∫–∏ –Ω–∞ —è—á–µ–π–∫–∞—Ö */
.b5050-cell::before{
  content: "‚ú¶";
  position: absolute;
  top: 6px;
  right: 10px;
  font-size: 14px;
  opacity: 0.3;
  color: #a78bfa;
  animation: sparkle 2s ease-in-out infinite;
}

@keyframes sparkle{
  0%, 100%{ opacity: 0.2; transform: scale(0.9) rotate(0deg); }
  50%{ opacity: 0.6; transform: scale(1.1) rotate(180deg); }
}

/* Highlight landed */
.b5050-cell.is-win{
  background: rgba(167, 139, 250, 0.25);
  border-color: rgba(167, 139, 250, 0.8);
  box-shadow: 
    0 0 30px rgba(167, 139, 250, 0.6),
    0 0 60px rgba(244, 114, 182, 0.4),
    inset 0 0 30px rgba(167, 139, 250, 0.2);
  transform: scale(1.05);
  text-shadow: 
    0 0 30px rgba(255, 255, 255, 1),
    0 0 50px rgba(167, 139, 250, 1);
}

/* VS - –º–æ–ª–Ω–∏—è */
.b5050-vs{
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;

  font-weight: 1000;
  letter-spacing: 3px;
  font-size: 16px;
  color: #fff;
  
  text-shadow: 
    0 0 20px rgba(167, 139, 250, 0.9),
    0 0 40px rgba(244, 114, 182, 0.9),
    0 8px 24px rgba(0, 0, 0, 0.6);
  
  opacity: 0.95;
  position: relative;
}

/* Lightning icon styling */
.b5050-lightning-icon{
  width: 44px;
  height: 44px;
  object-fit: contain;
  filter: 
    drop-shadow(0 0 16px rgba(167, 139, 250, 0.8))
    drop-shadow(0 0 24px rgba(244, 114, 182, 0.6))
    drop-shadow(0 8px 20px rgba(0, 0, 0, 0.5));
  animation: b5050LightningPulse 1800ms ease-in-out infinite;
  will-change: filter, transform;
}

@keyframes b5050LightningPulse{
  0%{ 
    filter: 
      drop-shadow(0 0 12px rgba(167, 139, 250, 0.6))
      drop-shadow(0 0 20px rgba(244, 114, 182, 0.5))
      drop-shadow(0 8px 20px rgba(0, 0, 0, 0.4));
    transform: scale(0.98) rotate(-2deg);
  }
  50%{ 
    filter: 
      drop-shadow(0 0 24px rgba(167, 139, 250, 1))
      drop-shadow(0 0 36px rgba(244, 114, 182, 0.9))
      drop-shadow(0 8px 20px rgba(0, 0, 0, 0.6));
    transform: scale(1.08) rotate(2deg);
  }
  100%{ 
    filter: 
      drop-shadow(0 0 14px rgba(167, 139, 250, 0.7))
      drop-shadow(0 0 22px rgba(244, 114, 182, 0.6))
      drop-shadow(0 8px 20px rgba(0, 0, 0, 0.5));
    transform: scale(1) rotate(-1deg);
  }
}

/* Center line - —è—Ä–∫–∞—è —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è –ª–∏–Ω–∏—è */
.b5050-centerline{
  position: absolute;
  left: 18px;
  right: 18px;
  top: 50%;
  transform: translateY(-50%);
  height: 3px;
  border-radius: 999px;
  z-index: 3;
  pointer-events: none;

  background: linear-gradient(90deg,
    rgba(79, 70, 229, 0) 0%,
    rgba(139, 92, 246, 0.9) 20%,
    rgba(255, 255, 255, 1) 50%,
    rgba(244, 114, 182, 0.9) 80%,
    rgba(236, 72, 153, 0) 100%
  );
  box-shadow: 
    0 0 20px rgba(167, 139, 250, 0.8),
    0 0 40px rgba(244, 114, 182, 0.6),
    0 0 8px rgba(255, 255, 255, 0.9);
}

/* Result big X */
.b5050-result{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;

  font-weight: 1000;
  font-size: 92px;
  letter-spacing: 1px;
  color: #fff;

  text-shadow:
    0 0 40px rgba(167, 139, 250, 1),
    0 0 80px rgba(244, 114, 182, 0.8),
    0 18px 40px rgba(0, 0, 0, 0.7);

  opacity: 0;
  transform: scale(0.92);
  pointer-events: none;
  z-index: 10000000;
  transition: opacity 260ms ease, transform 360ms cubic-bezier(0.16,0.84,0.18,1);
}


/* ===== RESULT MODE ===== */
.b5050-machine--collapse .b5050-bulbs{
  opacity: 0;
  transform: translateY(-6px) scale(0.98);
  transition: opacity 420ms ease, transform 420ms ease;
}

.b5050-machine--collapse .b5050-bulb{
  animation: none !important;
}

.b5050-machine--collapse .b5050-unit,
.b5050-machine--collapse .b5050-vs{
  opacity: 0;
  transform: translateY(-10px) scale(0.975);
  pointer-events: none;
  transition: opacity 650ms ease, transform 650ms cubic-bezier(0.16, 0.84, 0.18, 1);
}

.b5050-machine--result .b5050-unit,
.b5050-machine--result .b5050-vs{
  opacity: 0;
  transform: translateY(-6px) scale(0.985);
  pointer-events: none;
  transition: opacity 220ms ease, transform 220ms ease;
}

.b5050-machine--result .b5050-result{
  opacity: 1;
  transform: scale(1);
}

/* ===== FLYING X LABELS ===== */
.b5050-flyx{
  position: fixed;
  transform: translate3d(-50%,-50%,0);
  z-index: 10000000;
  pointer-events: none;

  font-weight: 1000;
  font-size: 56px;
  letter-spacing: 0.5px;
  color: #fff;
  padding: 10px 16px;
}

/* Blue side */
.b5050-flyx--good{
  text-shadow: 
    0 0 30px rgba(139, 92, 246, 1),
    0 0 60px rgba(79, 70, 229, 0.8),
    0 10px 30px rgba(0, 0, 0, 0.6);
}

/* Pink side */
.b5050-flyx--bad{
  text-shadow: 
    0 0 30px rgba(244, 114, 182, 1),
    0 0 60px rgba(236, 72, 153, 0.8),
    0 10px 30px rgba(0, 0, 0, 0.6);
}

.b5050-flyx--idle{
  animation: b5050Idle 1200ms ease-in-out infinite;
}
@keyframes b5050Idle{
  0%{ transform: translate3d(-50%,-50%,0) scale(1); opacity: 0.95; }
  50%{ transform: translate3d(-50%,-50%,0) scale(1.04); opacity: 1; }
  100%{ transform: translate3d(-50%,-50%,0) scale(1); opacity: 0.95; }
}

.b5050-flyx--clash{
  animation: b5050Clash 200ms ease both;
}
@keyframes b5050Clash{
  0%{ transform: translate3d(-50%,-50%,0) scale(1); }
  60%{ transform: translate3d(-50%,-50%,0) scale(1.22); }
  100%{ transform: translate3d(-50%,-50%,0) scale(0.98); }
}

/* ===== EFFECTS ===== */
.b5050-shake{
  animation: b5050Shake 240ms ease both;
}
@keyframes b5050Shake{
  0%{ transform: translate3d(0,0,0); }
  25%{ transform: translate3d(2px,-2px,0); }
  50%{ transform: translate3d(-2px,2px,0); }
  75%{ transform: translate3d(2px,1px,0); }
  100%{ transform: translate3d(0,0,0); }
}

/* BOOM explosion */
.b5050-boom{
  position: fixed;
  transform: translate3d(-50%,-50%,0) scale(0.85);
  z-index: 10000007;
  pointer-events: none;
  width: 240px;
  height: 240px;
  object-fit: contain;
  opacity: 0;
  filter: 
    drop-shadow(0 0 40px rgba(167, 139, 250, 0.8))
    drop-shadow(0 0 60px rgba(244, 114, 182, 0.8))
    drop-shadow(0 20px 60px rgba(0, 0, 0, 0.7));
}
.b5050-boom.is-on{
  opacity: 1;
  transform: translate3d(-50%,-50%,0) scale(1);
  transition: opacity 140ms ease, transform 360ms cubic-bezier(0.18,0.9,0.2,1);
}
.b5050-boom.is-off{
  opacity: 0;
  transform: translate3d(-50%,-50%,0) scale(1.10);
  transition: opacity 520ms ease, transform 520ms ease;
}

/* PARTICLES */
.b5050-particle{
  position: fixed;
  transform: translate3d(-50%,-50%,0);
  z-index: 10000006;
  pointer-events: none;
  object-fit: contain;
  opacity: 0;
  filter: 
    drop-shadow(0 0 20px rgba(167, 139, 250, 0.6))
    drop-shadow(0 0 30px rgba(244, 114, 182, 0.6))
    drop-shadow(0 16px 50px rgba(0, 0, 0, 0.6));
}

/* Flash effect - —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è –≤—Å–ø—ã—à–∫–∞ */
.b5050-flash{
  position: fixed;
  transform: translate3d(-50%,-50%,0) scale(0.6);
  width: 420px;
  height: 420px;
  border-radius: 999px;
  pointer-events: none;
  z-index: 10000006;
  opacity: 0;
  background: radial-gradient(circle,
    rgba(255, 255, 255, 0.95) 0%,
    rgba(167, 139, 250, 0.7) 15%,
    rgba(244, 114, 182, 0.5) 30%,
    rgba(139, 92, 246, 0.2) 50%,
    rgba(0, 0, 0, 0) 75%
  );
  filter: blur(2px);
}
.b5050-flash.is-on{
  animation: b5050Flash 520ms ease forwards;
}
@keyframes b5050Flash{
  0%{ opacity: 0; transform: translate3d(-50%,-50%,0) scale(0.55); }
  20%{ opacity: 1; transform: translate3d(-50%,-50%,0) scale(0.95); }
  100%{ opacity: 0; transform: translate3d(-50%,-50%,0) scale(1.15); }
}

/* Shockwave ring - —É–¥–∞—Ä–Ω–∞—è –≤–æ–ª–Ω–∞ */
.b5050-ring{
  position: fixed;
  transform: translate3d(-50%,-50%,0) scale(0.2);
  width: 340px;
  height: 340px;
  border-radius: 999px;
  pointer-events: none;
  z-index: 10000005;
  opacity: 0;
  border: 3px solid rgba(167, 139, 250, 0.8);
  box-shadow: 
    0 0 40px rgba(167, 139, 250, 0.6),
    0 0 80px rgba(244, 114, 182, 0.4),
    inset 0 0 40px rgba(255, 255, 255, 0.3);
}
.b5050-ring.is-on{
  animation: b5050Ring 780ms ease forwards;
}
@keyframes b5050Ring{
  0%{ 
    opacity: 0; 
    transform: translate3d(-50%,-50%,0) scale(0.18);
    border-color: rgba(167, 139, 250, 0.8);
  }
  25%{ 
    opacity: 0.9;
    border-color: rgba(244, 114, 182, 0.8);
  }
  100%{ 
    opacity: 0; 
    transform: translate3d(-50%,-50%,0) scale(1.25);
    border-color: rgba(236, 72, 153, 0.4);
  }
}

/* Dimmed cells on non-picked reel */
.b5050-cell.is-dim{
  opacity: 0.4;
  filter: saturate(0.5) brightness(0.85);
}

.b5050-cell.is-picked{
  box-shadow:
    0 0 30px rgba(167, 139, 250, 0.7),
    0 0 50px rgba(244, 114, 182, 0.5),
    inset 0 0 20px rgba(255, 255, 255, 0.15);
}




/* =========================================================
   LOOT RUSH BONUS - CS:GO STYLE (–£–õ–£–ß–®–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)
   üî• –ù–û–í–û–ï: –ü–ª–∞–≤–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, glow —ç—Ñ—Ñ–µ–∫—Ç—ã, —É–ª—É—á—à–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
   üî• –¢–∞–π–º–µ—Ä —Å–∫—Ä—ã—Ç –¥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—ã–±–æ—Ä–∞ —Å—É–º–∫–∏
   ========================================================= */

/* Cutscene container */
.lr-cutscene {
  width: 100%;
  max-width: 480px;
  margin: 60px auto 0 auto; /* üî• –û–ø—É—Å–∫–∞–µ–º –≤–µ—Å—å –±–æ–Ω—É—Å –Ω–∏–∂–µ */
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 24px;
  animation: lrFadeIn 0.5s ease forwards;
}

@keyframes lrFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Grid first */
.lr-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  width: 100%;
  max-width: 440px;
  margin: 0 auto;
  order: 1;
}

/* Bottom section (title + timer) */
.lr-bottom {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  order: 2;
}

/* Title */
.lr-title {
  font-size: 22px;
  font-weight: 900;
  color: #fff;
  text-align: center;
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  text-shadow: 
    0 2px 12px rgba(0, 0, 0, 0.6),
    0 0 20px rgba(168, 85, 247, 0.3);
  background: linear-gradient(135deg, #a855f7, #ec4899);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.lr-title.lr-show {
  opacity: 1;
  transform: translateY(0);
}

/* Timer - üî• –°–ö–†–´–¢ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ */
.lr-timer {
  font-size: 56px;
  font-weight: 900;
  color: #fff;
  text-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.6),
    0 0 30px rgba(168, 85, 247, 0.5);
  min-height: 56px;
  line-height: 1;
  transition: all 0.3s ease;
}

/* üî• –°–∫—Ä—ã—Ç—ã–π —Ç–∞–π–º–µ—Ä */
.lr-timer-hidden {
  opacity: 0;
  transform: scale(0.8) translateY(-10px);
  pointer-events: none;
}

/* üî• –í–∏–¥–∏–º—ã–π —Ç–∞–π–º–µ—Ä */
.lr-timer-visible {
  opacity: 1;
  transform: scale(1) translateY(0);
  animation: lrTimerAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes lrTimerAppear {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(-20px);
  }
  60% {
    transform: scale(1.1) translateY(0);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.lr-timer-pulse {
  animation: lrTimerPulse 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes lrTimerPulse {
  0%, 100% { 
    transform: scale(1); 
    text-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.6),
      0 0 30px rgba(168, 85, 247, 0.5);
  }
  50% { 
    transform: scale(1.2); 
    text-shadow: 
      0 8px 24px rgba(0, 0, 0, 0.8),
      0 0 50px rgba(168, 85, 247, 0.8),
      0 0 80px rgba(168, 85, 247, 0.4);
  }
}

/* Tile (each bag/mult) */
/* Tile (each bag/mult) */
.lr-tile {
  position: relative;
  aspect-ratio: 1;
  background: transparent;
  border: none;
  border-radius: 16px;
  overflow: visible;
  cursor: default;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  padding: 0;
}

/* Multiplier (hidden initially) */
.lr-mult {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 20px;
  color: #fff;
  text-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.6),
    0 0 20px rgba(168, 85, 247, 0.4);
  z-index: 1;
  opacity: 0;
  transform: scale(0.8) translateY(-10px);
}

/* Show multiplier - üî• –¢–û–õ–¨–ö–û –ü–†–ò REVEAL */
.lr-tile.lr-mult-show .lr-mult,
.lr-tile.lr-reveal .lr-mult {
  animation: lrMultShow 0.3s ease forwards;
}

@keyframes lrMultShow {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Bag (starts hidden) */
.lr-bag {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  padding: 10%;
  opacity: 0;
  transform: translateY(-100%) rotate(-10deg);
  z-index: 2;
  filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.5));
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Cover with bag */
.lr-tile.lr-covered .lr-bag {
  animation: lrBagDrop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes lrBagDrop {
  from {
    opacity: 0;
    transform: translateY(-100%) rotate(-10deg) scale(0.8);
  }
  60% {
    transform: translateY(5%) rotate(2deg) scale(1.05);
  }
  to {
    opacity: 1;
    transform: translateY(0) rotate(0deg) scale(1);
  }
}

/* Spinning state - CS:GO style horizontal shift */
.lr-tile.lr-spinning .lr-bag {
  transition: opacity 0.12s ease, transform 0.12s ease;
}

/* Row-specific animations for visual effect (4x6 grid - 24 bags) */
.lr-spinning[data-index="0"],
.lr-spinning[data-index="1"],
.lr-spinning[data-index="2"],
.lr-spinning[data-index="3"] {
  animation: lrShiftRight 0.3s ease-in-out infinite;
}

.lr-spinning[data-index="4"],
.lr-spinning[data-index="5"],
.lr-spinning[data-index="6"],
.lr-spinning[data-index="7"] {
  animation: lrShiftLeft 0.3s ease-in-out infinite;
}

.lr-spinning[data-index="8"],
.lr-spinning[data-index="9"],
.lr-spinning[data-index="10"],
.lr-spinning[data-index="11"] {
  animation: lrShiftRight 0.3s ease-in-out infinite;
}

.lr-spinning[data-index="12"],
.lr-spinning[data-index="13"],
.lr-spinning[data-index="14"],
.lr-spinning[data-index="15"] {
  animation: lrShiftLeft 0.3s ease-in-out infinite;
}

.lr-spinning[data-index="16"],
.lr-spinning[data-index="17"],
.lr-spinning[data-index="18"],
.lr-spinning[data-index="19"] {
  animation: lrShiftRight 0.3s ease-in-out infinite;
}

.lr-spinning[data-index="20"],
.lr-spinning[data-index="21"],
.lr-spinning[data-index="22"],
.lr-spinning[data-index="23"] {
  animation: lrShiftLeft 0.3s ease-in-out infinite;
}
@keyframes lrShiftRight {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(4px); }
}

@keyframes lrShiftLeft {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(-4px); }
}

/* Selectable */
/* Selectable */
.lr-tile.lr-selectable {
  cursor: pointer;
}

/* Selectable */
.lr-tile.lr-selectable {
  cursor: pointer;
}

.lr-tile.lr-selectable:hover {
  transform: translateY(-6px) scale(1.08);
}

/* üî• Active/Click state - animated press */
.lr-tile.lr-selectable:active {
  transform: translateY(-2px) scale(1.02);
  transition: all 0.1s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* üî• Touch feedback for mobile */
.lr-tile.lr-selectable:active .lr-bag {
  filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.6)) brightness(1.1);
}






/* Selected - Epic fog/mist effect */
.lr-tile.lr-selected {
  position: relative;
  border-color: rgba(255, 40, 248, 0.95);
  background: radial-gradient(ellipse at center, 
    rgba(105, 40, 255, 0.35) 0%, 
    rgba(176, 40, 255, 0.2) 40%,
    rgba(151, 40, 255, 0.1) 70%,
    transparent 90%);
  box-shadow: 
    0 0 0 3px rgba(241, 40, 255, 0.9),
    0 0 50px rgba(226, 40, 255, 0.7),
    0 0 100px rgba(255, 40, 244, 0.5),
    0 0 150px rgba(223, 40, 255, 0.3),
    inset 0 0 50px rgba(248, 40, 255, 0.3);
  animation: lrSelectedPulse 2.5s ease-in-out infinite;
  z-index: 10;
  transform: translateY(-6px) scale(1.08);
  transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  overflow: visible;
}

/* Animated fog layer 1 - slow drift */
.lr-tile.lr-selected::before {
  content: '';
  position: absolute;
  inset: -60%;
  background: 
    radial-gradient(ellipse 80% 50% at 20% 50%, rgba(208, 40, 255, 0.4) 0%, transparent 50%),
    radial-gradient(ellipse 70% 60% at 80% 30%, rgba(255, 40, 251, 0.35) 0%, transparent 50%),
    radial-gradient(ellipse 90% 40% at 50% 70%, rgba(203, 60, 255, 0.3) 0%, transparent 50%);
  filter: blur(25px);
  animation: lrFogDrift1 8s ease-in-out infinite;
  opacity: 0.85;
  pointer-events: none;
  z-index: -1;
  border-radius: 50%;
}

/* Animated fog layer 2 - medium speed, opposite direction */
.lr-tile.lr-selected::after {
  content: '';
  position: absolute;
  inset: -50%;
  background: 
    radial-gradient(ellipse 60% 70% at 60% 40%, rgba(245, 50, 255, 0.45) 0%, transparent 50%),
    radial-gradient(ellipse 75% 55% at 30% 60%, rgba(198, 40, 255, 0.4) 0%, transparent 50%),
    radial-gradient(ellipse 85% 65% at 70% 20%, rgba(255, 70, 255, 0.35) 0%, transparent 50%);
  filter: blur(20px);
  animation: lrFogDrift2 6s ease-in-out infinite;
  opacity: 0.9;
  pointer-events: none;
  z-index: -2;
  border-radius: 50%;
}

@keyframes lrSelectedPulse {
  0%, 100% {
    box-shadow: 
      0 0 0 3px rgba(119, 40, 255, 0.9),
      0 0 50px rgba(219, 40, 255, 0.7),
      0 0 100px rgba(40, 176, 255, 0.5),
      0 0 150px rgba(216, 40, 255, 0.3);
    filter: brightness(1.05) saturate(1.1) drop-shadow(0 10px 30px rgba(219, 40, 255, 0.5));
  }
  50% {
    box-shadow: 
      0 0 0 5px rgb(191, 40, 255),
      0 0 70px rgba(255, 40, 226, 0.9),
      0 0 130px rgba(201, 40, 255, 0.7),
      0 0 200px rgba(216, 40, 255, 0.5),
      0 0 270px rgba(40, 173, 255, 0.3);
    filter: brightness(1.2) saturate(1.3) drop-shadow(0 15px 40px rgba(255, 200, 40, 0.7));
  }
}

/* Fog drift animation 1 - slow, smooth */
@keyframes lrFogDrift1 {
  0%, 100% { 
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 0.85;
  }
  25% {
    transform: translate(-8px, -10px) scale(1.1) rotate(2deg);
    opacity: 0.95;
  }
  50% {
    transform: translate(-5px, 8px) scale(0.95) rotate(-1deg);
    opacity: 0.8;
  }
  75% {
    transform: translate(10px, -5px) scale(1.05) rotate(1deg);
    opacity: 0.9;
  }
}

/* Fog drift animation 2 - faster, opposite direction */
@keyframes lrFogDrift2 {
  0%, 100% { 
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 0.9;
  }
  33% {
    transform: translate(12px, 8px) scale(1.08) rotate(-2deg);
    opacity: 1;
  }
  66% {
    transform: translate(-10px, -12px) scale(0.98) rotate(2deg);
    opacity: 0.85;
  }
}


/* üî• –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û: Reveal - —Å—É–º–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö */
.lr-tile.lr-reveal .lr-bag {
  animation: lrBagLiftUp 0.5s ease-out forwards;
  z-index: 3;
}

.lr-tile.lr-reveal .lr-mult {
  z-index: 1;
  opacity: 1;
}

@keyframes lrBagLiftUp {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-120%);
  }
}

/* üî• –£–ë–†–ê–ù–û: —ç—Ñ—Ñ–µ–∫—Ç —Ç—É–º–∞–Ω–∞ –ø—Ä–∏ reveal */

/* Multiplier is already visible, no animation needed */
.lr-tile.lr-reveal .lr-mult {
  /* Mult was always there, just covered by bag */
  opacity: 1 !important;
  transform: scale(1) translateY(0) !important;
}
/* Winner tile */
.lr-tile.lr-winner .lr-mult {
  color: #ffd028;
  text-shadow: 
    0 0 30px rgba(255, 208, 40, 1),
    0 0 60px rgba(255, 208, 40, 0.6),
    0 4px 20px rgba(0, 0, 0, 0.8);
  transform: scale(1.4) !important;
  animation: lrWinnerPulse 1s ease-in-out infinite;
}

@keyframes lrWinnerPulse {
  0%, 100% {
    transform: scale(1.4) rotate(0deg);
    text-shadow: 
      0 0 30px rgba(255, 208, 40, 1),
      0 0 60px rgba(255, 208, 40, 0.6);
  }
  50% {
    transform: scale(1.5) rotate(3deg);
    text-shadow: 
      0 0 50px rgba(255, 208, 40, 1),
      0 0 100px rgba(255, 208, 40, 0.8),
      0 0 150px rgba(255, 208, 40, 0.4);
  }
}

/* Picked tile glow */
.lr-tile.lr-picked {
  border-color: rgba(255, 200, 40, 1);
  background: linear-gradient(135deg, rgba(255, 200, 40, 0.2), rgba(255, 165, 40, 0.15));
  box-shadow: 
    0 0 0 4px rgba(255, 200, 40, 0.7),
    0 0 50px rgba(255, 200, 40, 0.8),
    0 0 100px rgba(255, 200, 40, 0.4),
    inset 0 0 30px rgba(255, 200, 40, 0.2);
  animation: lrPickedGlow 1.2s ease-in-out infinite;
}

@keyframes lrPickedGlow {
  0%, 100% {
    box-shadow: 
      0 0 0 4px rgba(255, 200, 40, 0.7),
      0 0 50px rgba(255, 200, 40, 0.8);
  }
  50% {
    box-shadow: 
      0 0 0 5px rgba(255, 200, 40, 0.9),
      0 0 80px rgba(255, 200, 40, 1),
      0 0 120px rgba(255, 200, 40, 0.6);
  }
}
/* ===== 4x4 GRID LAYOUT ===== */
.lr-grid {
  grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  gap: 12px;
  max-width: 460px;
}

.lr-tile {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Bigger bags for 4x4 */
.lr-bag {
  width: 110% !important;
  height: 110% !important;
  padding: 5% !important;
}
/* ============================================
   RESPONSIVE
   ============================================ */

   @media (max-width: 420px) {
    .lr-cutscene {
      padding: 16px;
      gap: 20px;
    }
    
    .lr-title {
      font-size: 20px;
    }
    
    .lr-timer {
      font-size: 48px;
    }
    
    .lr-grid {
      gap: 10px;
    }
    
    .lr-mult {
      font-size: 20px;
    }
  }
  
  @media (max-width: 360px) {
    .lr-grid {
      gap: 8px;
    }
    
    .lr-mult {
      font-size: 18px;
    }
    
    .lr-timer {
      font-size: 42px;
    }
  }

/* ============================================
   ACCESSIBILITY
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .lr-tile,
  .lr-mult,
  .lr-bag,
  .lr-title,
  .lr-timer,
  .lr-cutscene {
    animation: none !important;
    transition: none !important;
  }
  
  .lr-tile.lr-mult-show .lr-mult,
  .lr-tile.lr-covered .lr-bag,
  .lr-tile.lr-reveal .lr-mult,
  .lr-tile.lr-reveal .lr-bag {
    opacity: 1 !important;
    transform: none !important;
  }
}

@media (prefers-contrast: high) {
  .lr-tile {
    border-width: 2px;
  }
  
  .lr-tile.lr-selected {
    border-width: 3px;
  }
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS
   ============================================ */

.lr-tile,
.lr-mult,
.lr-bag {
  will-change: transform, opacity;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

.lr-tile.lr-reveal {
  animation: removeWillChange 0.5s 1s forwards;
}

@keyframes removeWillChange {
  to {
    will-change: auto;
  }
}

/* LOOTRUSH: reveal multipliers */
.lr-tile.lr-reveal .lr-bag{
  opacity: 0 !important;
  transform: scale(0.9) rotate(-10deg) !important;
  transition: opacity .3s ease, transform .3s ease;
}

.lr-tile.lr-reveal .lr-mult{
  opacity: 1 !important;
  transform: scale(1) translateY(0) !important;
  transition: opacity .3s ease, transform .3s ease;
}

/* =========================================================
   WILD TIME BONUS - PREMIUM EDITION
   Modern, luxurious design with animations and effects
   ========================================================= */

   #wildTimeOverlay.wt-overlay {
    position: fixed;
    inset: 0;
    z-index: 999999;
    display: none;
    align-items: center;
    justify-content: center;
    
    opacity: 0;
    pointer-events: none;
    transition: opacity 400ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  #wildTimeOverlay.wt-overlay.wt-active {
    opacity: 1;
    pointer-events: auto;
  }
  
  #wildTimeOverlay.wt-overlay.wt-leave { 
    opacity: 0;
    transition: opacity 300ms ease-out;
  }
  
  /* Animated gradient backdrop */
  #wildTimeOverlay .wt-backdrop {
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(ellipse at 30% 50%, rgba(255, 200, 50, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 70% 50%, rgba(255, 150, 30, 0.12) 0%, transparent 50%),
      linear-gradient(135deg, rgba(0, 0, 0, 0.85) 0%, rgba(20, 10, 5, 0.9) 100%);
    backdrop-filter: blur(20px) brightness(0.7) saturate(1.2);
    -webkit-backdrop-filter: blur(20px) brightness(0.7) saturate(1.2);
    animation: backdropPulse 8s ease-in-out infinite;
  }
  
  @keyframes backdropPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.95; }
  }
  
  #wildTimeOverlay .wt-container {
    position: relative;
    z-index: 1;
    width: min(980px, 98vw);
    height: min(980px, 98vh);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* ===================== WHEEL STAGE ===================== */
  
  #wildTimeOverlay .wt-stage {
    position: relative;
    width: min(820px, 96vw);
    aspect-ratio: 1;
    overflow: visible;
    
    opacity: 1;
    transform: scale(1);
    transition: 
      opacity 400ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
    
    --ptr-r: 340px;
    
    /* Outer glow */
    filter: drop-shadow(0 0 60px rgba(255, 200, 50, 0.3));
  }
  
  #wildTimeOverlay .wt-stage::before {
    content: '';
    position: absolute;
    inset: -40px;
    background: radial-gradient(circle, rgba(255, 215, 120, 0.08) 0%, transparent 70%);
    pointer-events: none;
    animation: stageGlow 3s ease-in-out infinite;
  }
  
  @keyframes stageGlow {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.05); }
  }
  
  #wildTimeOverlay .wt-stage.wt-stage--hide {
    opacity: 0;
    transform: scale(0.92) translateY(20px);
    pointer-events: none;
  }
  
  #wildTimeOverlay #wildTimeCanvas {
    width: 100%;
    height: 100%;
    display: block;
    border-radius: 50%;
    box-shadow: 
      0 0 0 3px rgba(255, 215, 120, 0.2),
      0 0 0 6px rgba(255, 215, 120, 0.1),
      0 30px 80px rgba(0, 0, 0, 0.5),
      inset 0 0 60px rgba(255, 200, 50, 0.05);
  }
  
  /* Pointers with enhanced styling */
  #wildTimeOverlay .wt-pointer {
    position: absolute;
    left: 50%;
    top: 50%;
    width: clamp(50px, 6.5vw, 68px);
    height: auto;
    pointer-events: none;
    /* hidden until prepareCanvas sets --ptr-r correctly */
    opacity: 0;
    transition: opacity 300ms ease 200ms;
    filter: 
      drop-shadow(0 12px 24px rgba(0, 0, 0, 0.6))
      drop-shadow(0 0 12px rgba(255, 200, 50, 0.4));
    transform:
      translate(-50%, -50%)
      rotate(var(--ang))
      translateY(calc(-1 * var(--ptr-r)));
    animation: pointerPulse 2s ease-in-out infinite;
    animation-delay: calc(var(--ang) * 0.1s);
  }

  /* Show pointers once the stage has a proper --ptr-r value (set by JS) */
  #wildTimeOverlay.wt-active .wt-pointer {
    opacity: 0.98;
  }
  
  @keyframes pointerPulse {
    0%, 100% { filter: 
      drop-shadow(0 12px 24px rgba(0, 0, 0, 0.6))
      drop-shadow(0 0 12px rgba(255, 200, 50, 0.4)); }
    50% { filter: 
      drop-shadow(0 12px 24px rgba(0, 0, 0, 0.6))
      drop-shadow(0 0 20px rgba(255, 200, 50, 0.7)); }
  }
  
  /* ===================== JAR GAME ===================== */
  
  #wildTimeOverlay .wt-jarGame {
    position: absolute;
    inset: 0;
    
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: clamp(12px, 2.5vh, 22px);
    
    opacity: 0;
    pointer-events: none;
    transform: translateY(30px) scale(0.95);
    transition: 
      opacity 450ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 550ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  #wildTimeOverlay .wt-jarGame.wt-jarGame--show {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0) scale(1);
  }
  
  /* Clean row - no panels, only glows */
  #wildTimeOverlay .wt-jarRow {
    position: relative;
    width: min(980px, 96vw);
    min-height: clamp(240px, 36vh, 460px);
    
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: clamp(20px, 7.5vw, 150px);
    padding: clamp(20px, 5vw, 50px) clamp(16px, 4.5vw, 50px);
  }
  
  #wildTimeOverlay .wt-slot {
    flex: 1;
    height: 100%;
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    position: relative;
  }
  
  /* Gorgeous multiplier text */
  #wildTimeOverlay .wt-mult {
    font-weight: 900;
    font-size: clamp(48px, 11vw, 120px);
    background: linear-gradient(180deg, 
      #fff 0%, 
      #ffd678 40%, 
      #ffb444 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 0.02em;
    line-height: 1;
    margin: 0;
    opacity: 1;
    transform: translateY(0) scale(1);
    transition: 
      opacity 350ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 350ms cubic-bezier(0.34, 1.56, 0.64, 1);
    white-space: nowrap;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
    position: relative;
  }
  
  #wildTimeOverlay .wt-mult::after {
    content: attr(data-mult);
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, 
      rgba(255, 255, 255, 0.3) 0%, 
      transparent 50%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: blur(1px);
    opacity: 0.6;
  }
  
  #wildTimeOverlay .wt-mult.wt-mult--hidden {
    opacity: 0;
    transform: translateY(10px) scale(0.9);
  }
  
  /* Spectacular selected multiplier */

#wildTimeOverlay .wt-mult.wt-mult--selected {
  animation: 
    multSelected 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
    multPulse 3.5s ease-in-out 0.8s infinite;
  filter: 
    drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5))
    drop-shadow(0 0 30px rgba(255, 200, 50, 0.8))
    drop-shadow(0 0 60px rgba(255, 200, 50, 0.5));
  position: relative;
}

/* Rotating rays around winner */
#wildTimeOverlay .wt-mult.wt-mult--selected::before {
  content: '';
  position: absolute;
  inset: -40%;
  background: 
    repeating-conic-gradient(
      from 0deg,
      transparent 0deg,
      transparent 15deg,
      rgba(255, 200, 50, 0.12) 15deg,
      rgba(255, 200, 50, 0.12) 18deg,
      transparent 18deg,
      transparent 33deg
    );
  z-index: -1;
  border-radius: 50%;
  opacity: 0;
  animation: 
    raysRotate 8s linear infinite,
    raysFadeIn 0.8s ease-out 0.4s forwards;
}

/* Pulsing outer glow */
#wildTimeOverlay .wt-mult.wt-mult--selected::after {
  content: '';
  position: absolute;
  inset: -25%;
  background: radial-gradient(ellipse at center, 
    rgba(255, 200, 50, 0.25) 0%, 
    rgba(255, 150, 30, 0.15) 30%,
    transparent 70%);
  border-radius: 50%;
  z-index: -2;
  opacity: 0;
  animation: 
    glowExpand 2.5s ease-in-out 0.5s infinite,
    raysFadeIn 0.6s ease-out 0.3s forwards;
}

@keyframes multSelected {
  0% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-12px) scale(1.15); }
  100% { transform: translateY(0) scale(1.1); }
}

@keyframes multPulse {
  0%, 100% { 
    filter: 
      drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5))
      drop-shadow(0 0 30px rgba(255, 200, 50, 0.75))
      drop-shadow(0 0 60px rgba(255, 200, 50, 0.45));
  }
  50% { 
    filter: 
      drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5))
      drop-shadow(0 0 40px rgba(255, 200, 50, 0.95))
      drop-shadow(0 0 80px rgba(255, 200, 50, 0.6))
      drop-shadow(0 0 110px rgba(255, 150, 30, 0.35));
  }
}

@keyframes raysRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes raysFadeIn {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes glowExpand {
  0% { 
    transform: scale(0.9); 
    opacity: 0.7;
  }
  50% {
    transform: scale(1.15);
    opacity: 0.5;
  }
  100% { 
    transform: scale(1.5); 
    opacity: 0;
  }
}
  /* Beautiful jar buttons with motion trails */
  #wildTimeOverlay .wt-jarBtn {
    position: absolute;
    top: 0;
    left: 0;
    
    border: 0;
    padding: 0;
    background: transparent;
    cursor: pointer;
    outline: none;
    
    width: clamp(150px, 28vw, 300px);
    height: auto;
    
    opacity: 1;
    
    --x: 0px;
    --y: 0px;
    --rot: 0deg;
    --lift: 0px;
    --s: 1;
    
    transform: translate(var(--x), calc(var(--y) - var(--lift))) rotate(var(--rot)) scale(var(--s));
    will-change: transform, opacity;
    transition: transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  /* Motion trail effect during fast movements */
  #wildTimeOverlay .wt-jarBtn::after {
    content: '';
    position: absolute;
    inset: 5%;
    background: radial-gradient(ellipse at center, 
      rgba(255, 200, 50, 0.15) 0%, 
      transparent 60%);
    border-radius: 50%;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 150ms ease, transform 150ms ease;
    pointer-events: none;
    z-index: -1;
  }
  
  #wildTimeOverlay .wt-jarBtn:hover:not(:disabled) {
    --s: 1.05;
    filter: 
      drop-shadow(0 20px 35px rgba(0, 0, 0, 0.6))
      drop-shadow(0 0 20px rgba(255, 200, 50, 0.3));
  }
  
  #wildTimeOverlay .wt-jarImg {
    width: 100%;
    height: auto;
    display: block;
    pointer-events: none;
    filter: 
      drop-shadow(0 20px 35px rgba(0, 0, 0, 0.65))
      drop-shadow(0 5px 15px rgba(255, 200, 50, 0.1));
    transition: filter 300ms ease;
  }
  
  /* Enhanced shuffling effect - only visual effects, no transform blocking */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--shuffling::after {
    opacity: 0.8;
    transform: scale(1.2);
    animation: trailPulse 0.4s ease-in-out infinite;
  }
  
  @keyframes trailPulse {
    0%, 100% { opacity: 0.6; transform: scale(1.1); }
    50% { opacity: 1; transform: scale(1.4); }
  }
  
  /* Glowing aura during shuffle */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--shuffling::before {
    content: '';
    position: absolute;
    inset: -10%;
    background: radial-gradient(ellipse at center, 
      rgba(255, 200, 50, 0.25) 0%, 
      rgba(255, 150, 30, 0.15) 40%,
      transparent 70%);
    border-radius: 50%;
    animation: shuffleAura 0.4s ease-in-out infinite;
    pointer-events: none;
    z-index: -1;
  }
  
  @keyframes shuffleAura {
    0%, 100% { 
      opacity: 0.7; 
      transform: scale(1) rotate(0deg); 
    }
    50% { 
      opacity: 1; 
      transform: scale(1.2) rotate(180deg); 
    }
  }
  
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--shuffling .wt-jarImg {
    filter:
      drop-shadow(0 25px 40px rgba(0, 0, 0, 0.7))
      drop-shadow(0 0 25px rgba(255, 200, 50, 0.6))
      drop-shadow(0 0 50px rgba(255, 200, 50, 0.3))
      brightness(1.15)
      contrast(1.08)
      saturate(1.1);
    animation: jarShuffleGlow 0.3s ease-in-out infinite alternate;
  }
  

  /* Lift animation */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--lift {
    transition: transform 600ms cubic-bezier(0.22, 0.61, 0.36, 1) !important;
  }
  
  /* Chosen jar - spectacular */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--chosen .wt-jarImg {
    filter:
      drop-shadow(0 25px 45px rgba(0, 0, 0, 0.7))
      drop-shadow(0 0 30px rgba(255, 200, 50, 0.6))
      drop-shadow(0 0 60px rgba(255, 200, 50, 0.3));
    animation: jarChosen 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  @keyframes jarChosen {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-3deg); }
    75% { transform: rotate(3deg); }
  }
  
  /* Picked jar highlight */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--picked {
    --s: 1.06;
  }
  
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--picked .wt-jarImg {
    filter:
      drop-shadow(0 20px 35px rgba(0, 0, 0, 0.65))
      drop-shadow(0 0 25px rgba(255, 255, 255, 0.4))
      drop-shadow(0 0 50px rgba(255, 200, 50, 0.3));
    animation: jarPicked 0.5s ease-in-out infinite;
  }
  
  @keyframes jarPicked {
    0%, 100% { filter:
      drop-shadow(0 20px 35px rgba(0, 0, 0, 0.65))
      drop-shadow(0 0 25px rgba(255, 255, 255, 0.4))
      drop-shadow(0 0 50px rgba(255, 200, 50, 0.3)); }
    50% { filter:
      drop-shadow(0 20px 35px rgba(0, 0, 0, 0.65))
      drop-shadow(0 0 35px rgba(255, 255, 255, 0.6))
      drop-shadow(0 0 70px rgba(255, 200, 50, 0.5)); }
  }
  
  /* Hint text */
  #wildTimeOverlay .wt-hint {
    color: rgba(255, 255, 255, 0.95);
    font-weight: 800;
    font-size: clamp(16px, 3.5vw, 22px);
    letter-spacing: 0.05em;
    text-transform: uppercase;
    pointer-events: none;
    text-shadow: 
      0 2px 4px rgba(0, 0, 0, 0.5),
      0 0 20px rgba(255, 200, 50, 0.3);
    animation: hintPulse 2s ease-in-out infinite;
  }
  
  @keyframes hintPulse {
    0%, 100% { opacity: 0.9; }
    50% { opacity: 1; }
  }
  
  /* Countdown timer */
  #wildTimeOverlay .wt-countdown {
    margin-top: 4px;
    opacity: 0;
    background: linear-gradient(180deg, 
      #fff 0%, 
      #ffd678 50%, 
      #ff9944 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 900;
    font-size: clamp(50px, 12vw, 100px);
    letter-spacing: 0.02em;
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.6));
    transform: scale(0.9);
    transition: 
      opacity 300ms ease,
      transform 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
    pointer-events: none;
  }
  
  #wildTimeOverlay .wt-countdown.wt-countdown--show {
    opacity: 1;
    transform: scale(1);
    animation: countdownTick 1s ease-in-out infinite;
  }
  
  @keyframes countdownTick {
    0% { transform: scale(1); }
    10% { transform: scale(1.15); }
    20% { transform: scale(1); }
  }
  

  #wildTimeOverlay .wt-win.wt-win--show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    #wildTimeOverlay *,
    #wildTimeOverlay *::before,
    #wildTimeOverlay *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  
  /* Mobile optimizations */
  @media (max-width: 768px) {
    #wildTimeOverlay .wt-jarRow {
      gap: clamp(12px, 5vw, 80px);
      padding: clamp(16px, 4vw, 30px) clamp(12px, 3vw, 25px);
    }
    
    #wildTimeOverlay .wt-mult {
      font-size: clamp(40px, 12vw, 100px);
    }
    
    #wildTimeOverlay .wt-countdown {
      font-size: clamp(44px, 14vw, 90px);
    }
  }
  

  

/* ========================================
   BONUS OVERLAYS - SIMPLE BACK BUTTON
   –ü—Ä–æ—Å—Ç–æ –±–µ–ª–∞—è –∏–∫–æ–Ω–∫–∞ + —Ç–µ–∫—Å—Ç "Back"
   –ë–µ–∑ —Ñ–æ–Ω–æ–≤, —Ä–∞–º–æ–∫ –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
   ======================================== */

/* ===== BONUS 5050 - Back Button ===== */
.b5050-back-btn {
  position: fixed;
  top: 100px;
  left: 20px;
  z-index: 10002;
  
  display: flex;
  align-items: center;
  gap: 8px;
  
  padding: 0;
  margin: 0;
  
  background: transparent;
  border: none;
  
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.b5050-back-btn:hover {
  opacity: 0.7;
}

.b5050-back-btn:active {
  opacity: 0.5;
}

.b5050-back-icon {
  width: 24px;
  height: 24px;
  filter: brightness(0) invert(1);
  pointer-events: none;
}

.b5050-back-text {
  font-size: 18px;
  font-weight: 500;
  color: #ffffff;
  pointer-events: none;
  user-select: none;
}

/* ===== LOOT RUSH - Back Button ===== */
.lr-back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 10002;
  
  display: flex;
  align-items: center;
  gap: 8px;
  
  padding: 0;
  margin: 0;
  
  background: transparent;
  border: none;
  
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.lr-back-btn:hover {
  opacity: 0.7;
}

.lr-back-btn:active {
  opacity: 0.5;
}

.lr-back-icon {
  width: 24px;
  height: 24px;
  filter: brightness(0) invert(1);
  pointer-events: none;
}

.lr-back-text {
  font-size: 18px;
  font-weight: 500;
  color: #ffffff;
  pointer-events: none;
  user-select: none;
}

/* ===== WILD TIME - Back Button ===== */
.wt-back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 10002;
  
  display: flex;
  align-items: center;
  gap: 8px;
  
  padding: 0;
  margin: 0;
  
  background: transparent;
  border: none;
  
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.wt-back-btn:hover {
  opacity: 0.7;
}

.wt-back-btn:active {
  opacity: 0.5;
}

.wt-back-icon {
  width: 24px;
  height: 24px;
  filter: brightness(0) invert(1);
  pointer-events: none;
}

.wt-back-text {
  font-size: 18px;
  font-weight: 500;
  color: #ffffff;
  pointer-events: none;
  user-select: none;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .b5050-back-btn,
  .lr-back-btn,
  .wt-back-btn {
    top: 16px;
    left: 16px;
    gap: 6px;
  }
  
  .b5050-back-icon,
  .lr-back-icon,
  .wt-back-icon {
    width: 20px;
    height: 20px;
  }
  
  .b5050-back-text,
  .lr-back-text,
  .wt-back-text {
    font-size: 16px;
  }
}

@media (max-width: 480px) {
  .b5050-back-btn,
  .lr-back-btn,
  .wt-back-btn {
    top: 2px;
    left: 12px;
    gap: 6px;
  }
  
  .b5050-back-icon,
  .lr-back-icon,
  .wt-back-icon {
    width: 18px;
    height: 18px;
  }
  
  .b5050-back-text,
  .lr-back-text,
  .wt-back-text {
    font-size: 14px;
  }
}