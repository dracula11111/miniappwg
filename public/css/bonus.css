/* ================================================================
   BONUS LIQUID GLASS — All Three Bonuses
   Aesthetic: visionOS / iOS 18 Liquid Glass — frosted, refractive,
   iridescent light through glass with aurora color per bonus.
   ================================================================ */

/* ----------------------------------------------------------------
   DESIGN TOKENS
   ---------------------------------------------------------------- */
   :root {
    /* Glass base */
    --glass-bg:           rgba(255, 255, 255, 0.07);
    --glass-bg-mid:       rgba(255, 255, 255, 0.10);
    --glass-bg-strong:    rgba(255, 255, 255, 0.14);
    --glass-border:       rgba(255, 255, 255, 0.13);
    --glass-border-hi:    rgba(255, 255, 255, 0.24);
    --glass-highlight:    inset 0 1px 0 rgba(255, 255, 255, 0.22),
                          inset 0 -1px 0 rgba(255, 255, 255, 0.04);
    --glass-blur:         blur(28px) saturate(1.8);
  
    /* Shadows */
    --shadow-glass:       0 8px 32px rgba(0,0,0,0.45),
                          0 2px 8px rgba(0,0,0,0.3);
    --shadow-deep:        0 24px 64px rgba(0,0,0,0.55),
                          0 8px 24px rgba(0,0,0,0.4);
  
    /* Back button */
    --back-btn-top:  100px;
    --back-btn-left: 20px;
  
    /* Easing */
    --spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --smooth: cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  
  /* ================================================================
     LOCK SCROLL
     ================================================================ */
  html.bonus-active,
  body.bonus-active { height: 100%; overflow: hidden; }
  body.bonus-active  { position: fixed; left: 0; right: 0; }
  
  
  /* ================================================================
     UNIVERSAL BACK BUTTON — Liquid Glass pill
     ================================================================ */
  .universal-back-btn,
  .b5050-back-btn,
  .lr-back-btn,
  .wt-back-btn {
    position: fixed;
    top: var(--back-btn-top, 100px);
    left: var(--back-btn-left, 20px);
    z-index: 1000000;
  
    display: flex !important;
    align-items: center;
    justify-content: center;
    gap: 8px;
  
    min-width: 48px;
    height: 48px;
    padding: 0 18px;
  
    background: rgba(255, 255, 255, 0.10);
    backdrop-filter: blur(20px) saturate(1.6);
    -webkit-backdrop-filter: blur(20px) saturate(1.6);
  
    border: 1px solid rgba(255, 255, 255, 0.20);
    border-radius: 50px;
  
    box-shadow:
      0 4px 16px rgba(0,0,0,0.35),
      inset 0 1px 0 rgba(255,255,255,0.25),
      inset 0 -1px 0 rgba(255,255,255,0.06);
  
    color: rgba(255, 255, 255, 0.92);
    font-size: 16px;
    font-weight: 600;
    letter-spacing: 0.01em;
  
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.28s var(--smooth);
  
    opacity: 0;
    transform: translateX(-8px);
  
    /* Plain back buttons have no specific position override */
    background-clip: padding-box;
  }
  
  /* Plain back btn positioning */
  .b5050-back-btn { top: 100px; left: 20px; }
  .lr-back-btn    { top: 20px;  left: 20px; }
  .wt-back-btn    { top: 20px;  left: 20px; }
  
  /* Show on active overlays */
  #bonus5050Overlay.bonus-overlay--active .universal-back-btn,
  #bonus5050Overlay.bonus-overlay--active .b5050-back-btn,
  .wt-overlay.wt-active .universal-back-btn,
  .wt-overlay.wt-active .wt-back-btn,
  .bonus-overlay--active .universal-back-btn,
  .lr-overlay--active .lr-back-btn {
    opacity: 1;
    transform: translateX(0);
    animation: glassBackIn 0.5s var(--spring) 0.15s both;
  }
  
  @keyframes glassBackIn {
    from { opacity: 0; transform: translateX(-12px); }
    to   { opacity: 1; transform: translateX(0); }
  }
  
  .universal-back-btn svg,
  .b5050-back-icon,
  .lr-back-icon,
  .wt-back-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    filter: brightness(0) invert(1);
    opacity: 0.88;
  }
  
  .universal-back-text,
  .b5050-back-text,
  .lr-back-text,
  .wt-back-text {
    pointer-events: none;
    user-select: none;
    color: rgba(255,255,255,0.92);
    font-size: 16px;
    font-weight: 600;
  }
  
  .universal-back-btn:hover,
  .b5050-back-btn:hover,
  .lr-back-btn:hover,
  .wt-back-btn:hover {
    background: rgba(255, 255, 255, 0.16);
    border-color: rgba(255, 255, 255, 0.30);
    transform: translateX(0) scale(1.04);
    box-shadow:
      0 6px 24px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.32);
  }
  
  .universal-back-btn:active,
  .b5050-back-btn:active,
  .lr-back-btn:active,
  .wt-back-btn:active {
    transform: translateX(0) scale(0.96);
    background: rgba(255, 255, 255, 0.20);
  }
  
  @media (max-width: 768px) {
    .universal-back-btn,
    .b5050-back-btn,
    .lr-back-btn,
    .wt-back-btn {
      min-width: 44px;
      height: 44px;
      padding: 0 14px;
      gap: 6px;
    }
    .b5050-back-btn { top: 16px; left: 16px; }
    .lr-back-btn    { top: 16px; left: 16px; }
    .wt-back-btn    { top: 16px; left: 16px; }
  }
  
  @media (max-width: 380px) {
    .universal-back-text,
    .b5050-back-text,
    .lr-back-text,
    .wt-back-text { display: none; }
  
    .universal-back-btn,
    .b5050-back-btn,
    .lr-back-btn,
    .wt-back-btn {
      width: 44px;
      min-width: 44px;
      padding: 0;
    }
  }
  
  @media (max-width: 480px) {
    .b5050-back-btn,
    .lr-back-btn,
    .wt-back-btn {
      top: 12px;
      left: 12px;
    }
  }
  
  
  /* ================================================================
     ██████╗  ███████╗  ██████╗  ███████╗  ██████╗
     ██╔══██╗ ██╔════╝ ██╔═══██╗ ██╔════╝ ██╔═══██╗
     ██████╔╝ ███████╗ ██║   ██║ ███████╗ ██║   ██║
     ██╔══██╗ ╚════██║ ██║▄▄ ██║ ╚════██║ ██║   ██║
     ██████╔╝ ███████║ ╚██████╔╝ ███████║ ╚██████╔╝
     BONUS 50/50  —  INDIGO ↔ ROSE LIQUID GLASS
     ================================================================ */
  
  /* Overlay */
  #bonus5050Overlay.bonus-overlay {
    position: fixed;
    inset: 0;
    z-index: 999999;
    display: none;
    align-items: center;
    justify-content: center;
  
    opacity: 0;
    pointer-events: none;
    transition: opacity 280ms var(--smooth);
  }
  #bonus5050Overlay.bonus-overlay.bonus-overlay--active {
    opacity: 1;
    pointer-events: auto;
  }
  #bonus5050Overlay.bonus-overlay.bonus-overlay--leave { opacity: 0; }
  
  /* Backdrop — deep space aurora */
  #bonus5050Overlay .bonus-overlay__blur-backdrop {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 70% 60% at 25% 40%, rgba(79, 70, 229, 0.22) 0%, transparent 60%),
      radial-gradient(ellipse 60% 70% at 75% 60%, rgba(244, 63, 94, 0.18) 0%, transparent 60%),
      radial-gradient(ellipse at center, rgba(15, 8, 40, 0.82) 0%, rgba(6, 3, 18, 0.95) 100%);
    backdrop-filter: blur(24px) brightness(0.60) saturate(1.3);
    -webkit-backdrop-filter: blur(24px) brightness(0.60) saturate(1.3);
  }
  
  /* Floating aurora light blobs */
  #bonus5050Overlay .bonus-overlay__blur-backdrop::before,
  #bonus5050Overlay .bonus-overlay__blur-backdrop::after {
    content: '';
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    pointer-events: none;
  }
  #bonus5050Overlay .bonus-overlay__blur-backdrop::before {
    width: 50vw; height: 50vw;
    top: -10%; left: -15%;
    background: rgba(99, 102, 241, 0.12);
    animation: auroraFloat1 14s ease-in-out infinite;
  }
  #bonus5050Overlay .bonus-overlay__blur-backdrop::after {
    width: 45vw; height: 45vw;
    bottom: -10%; right: -15%;
    background: rgba(244, 63, 94, 0.10);
    animation: auroraFloat2 18s ease-in-out infinite;
  }
  
  @keyframes auroraFloat1 {
    0%,100% { transform: translate(0,0) scale(1); opacity: 0.7; }
    33%     { transform: translate(8%,5%) scale(1.1); opacity: 1; }
    66%     { transform: translate(-5%,8%) scale(0.95); opacity: 0.8; }
  }
  @keyframes auroraFloat2 {
    0%,100% { transform: translate(0,0) scale(1); opacity: 0.6; }
    40%     { transform: translate(-6%,-8%) scale(1.08); opacity: 0.9; }
    70%     { transform: translate(5%,4%) scale(1.02); opacity: 0.75; }
  }
  
  /* Container */
  #bonus5050Overlay .bonus-container {
    position: relative;
    z-index: 1;
    width: min(440px, 94vw);
    display: flex;
    align-items: center;
    justify-content: center;
  
    opacity: 0;
    transform: translateY(16px) scale(0.97);
    transition: opacity 300ms var(--smooth), transform 420ms var(--spring);
  }
  #bonus5050Overlay.bonus-overlay--active .bonus-container {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  #bonus5050Overlay.bonus-overlay--leave .bonus-container {
    opacity: 0;
    transform: translateY(10px) scale(0.985);
    transition: opacity 220ms ease, transform 260ms ease;
  }
  
  /* Layout */
  .b5050-cutscene {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }
  
  /* Machine */
  .b5050-machine {
    position: relative;
    width: min(380px, 92vw);
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Bulbs — liquid light dots */
  .b5050-bulbs {
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
    margin: 10px 0;
  }
  
  .b5050-bulb {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.9), rgba(167,139,250,0.6));
    box-shadow:
      0 0 8px rgba(139, 92, 246, 0.7),
      0 0 18px rgba(244, 114, 182, 0.4),
      inset 0 1px 1px rgba(255,255,255,0.5);
  }
  
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb {
    animation: glassBulbPulse 1600ms ease-in-out infinite;
  }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(2)  { animation-delay:  90ms; }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(3)  { animation-delay: 180ms; }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(4)  { animation-delay: 270ms; }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(5)  { animation-delay: 360ms; }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(6)  { animation-delay: 450ms; }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(7)  { animation-delay: 540ms; }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(8)  { animation-delay: 630ms; }
  #bonus5050Overlay.bonus-overlay--active .b5050-bulb:nth-child(9)  { animation-delay: 720ms; }
  
  @keyframes glassBulbPulse {
    0%, 100% { opacity: 0.55; transform: scale(0.9); box-shadow: 0 0 6px rgba(139,92,246,0.5), 0 0 12px rgba(244,114,182,0.3); }
    50%       { opacity: 1;    transform: scale(1.15); box-shadow: 0 0 16px rgba(139,92,246,0.9), 0 0 28px rgba(244,114,182,0.6), 0 0 40px rgba(99,102,241,0.3); }
  }
  
  /* Dual container */
  .b5050-dual {
    position: relative;
    width: min(380px, 92vw);
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  
  /* Unit */
  .b5050-unit { position: relative; }
  
  /* Frame — Liquid Glass panel */
  .b5050-unitframe {
    position: relative;
    padding: 10px;
    border-radius: 24px;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    box-shadow:
      var(--shadow-glass),
      var(--glass-highlight),
      0 0 0 0.5px rgba(255,255,255,0.06) inset;
  }
  
  /* Refraction shimmer line at top of each panel */
  .b5050-unitframe::before {
    content: '';
    position: absolute;
    top: 0; left: 10%; right: 10%;
    height: 1px;
    background: linear-gradient(90deg,
      transparent,
      rgba(255,255,255,0.35) 30%,
      rgba(255,255,255,0.55) 50%,
      rgba(255,255,255,0.35) 70%,
      transparent);
    border-radius: 1px;
    pointer-events: none;
  }
  
  /* Good unit — indigo tint */
  .b5050-unit--good .b5050-unitframe {
    background:
      linear-gradient(135deg, rgba(79,70,229,0.12) 0%, rgba(99,102,241,0.06) 100%),
      var(--glass-bg);
    border-color: rgba(139, 92, 246, 0.22);
    box-shadow:
      var(--shadow-glass),
      0 0 40px rgba(79,70,229,0.18),
      inset 0 1px 0 rgba(167,139,250,0.25),
      inset 0 -1px 0 rgba(99,102,241,0.08);
  }
  
  /* Bad unit — rose tint */
  .b5050-unit--bad .b5050-unitframe {
    background:
      linear-gradient(135deg, rgba(236,72,153,0.12) 0%, rgba(244,63,94,0.06) 100%),
      var(--glass-bg);
    border-color: rgba(244, 114, 182, 0.22);
    box-shadow:
      var(--shadow-glass),
      0 0 40px rgba(236,72,153,0.16),
      inset 0 1px 0 rgba(248,180,215,0.25),
      inset 0 -1px 0 rgba(244,63,94,0.08);
  }
  
  /* Pointers */
  .b5050-pointer {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 0; height: 0;
    pointer-events: none;
    z-index: 5;
    will-change: transform;
  }
  
  .b5050-pointer--left {
    left: 6px;
    border-top: 18px solid transparent;
    border-bottom: 18px solid transparent;
    border-left: 22px solid rgba(167, 139, 250, 0.9);
    filter:
      drop-shadow(0 0 10px rgba(167,139,250,0.9))
      drop-shadow(0 0 20px rgba(99,102,241,0.5));
  }
  
  .b5050-pointer--right {
    right: 6px;
    border-top: 18px solid transparent;
    border-bottom: 18px solid transparent;
    border-right: 22px solid rgba(248, 113, 183, 0.9);
    filter:
      drop-shadow(0 0 10px rgba(248,113,183,0.9))
      drop-shadow(0 0 20px rgba(244,63,94,0.5));
  }
  
  .b5050-pointer--left::after,
  .b5050-pointer--right::after {
    content: '';
    position: absolute;
    top: -14px;
    width: 0; height: 0;
    border-top: 14px solid transparent;
    border-bottom: 14px solid transparent;
    opacity: 0.95;
  }
  .b5050-pointer--left::after  { left: -19px;  border-left:  18px solid rgba(10, 8, 40, 0.9); }
  .b5050-pointer--right::after { right: -19px; border-right: 18px solid rgba(20, 5, 20, 0.9); }
  
  /* Window (drum) — deep glass */
  .b5050-window {
    position: relative;
    height: 150px;
    border-radius: 18px;
    overflow: hidden;
    background: rgba(8, 6, 24, 0.75);
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow:
      inset 0 2px 16px rgba(0,0,0,0.5),
      inset 0 0 40px rgba(79,70,229,0.08);
  }
  
  .b5050-unit.is-picked .b5050-window {
    border-color: rgba(167, 139, 250, 0.35);
    box-shadow:
      0 0 0 1px rgba(167,139,250,0.25),
      0 0 32px rgba(167,139,250,0.25),
      inset 0 0 40px rgba(139,92,246,0.10),
      inset 0 1px 8px rgba(255,255,255,0.06);
  }
  
  /* Shading gradient inside window */
  .b5050-shade {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    background: linear-gradient(180deg,
      rgba(79,70,229,0.20) 0%,
      rgba(0,0,0,0) 30%,
      rgba(0,0,0,0) 70%,
      rgba(236,72,153,0.20) 100%);
  }
  
  /* Track */
  .b5050-track {
    position: absolute;
    left: 0; right: 0; top: 0;
    padding: 14px 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    will-change: transform, opacity;
    transform: translate3d(0,0,0);
    z-index: 1;
  }
  
  /* Cells — glass tiles */
  .b5050-cell {
    height: 56px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
  
    font-weight: 900;
    font-size: 42px;
    letter-spacing: 0.5px;
    color: #fff;
  
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.09);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.12);
  
    text-shadow:
      0 0 20px rgba(167,139,250,0.7),
      0 8px 20px rgba(0,0,0,0.6);
  
    position: relative;
    transition: all 0.2s ease;
  }
  
  .b5050-cell::before {
    content: '✦';
    position: absolute;
    top: 5px; right: 9px;
    font-size: 11px;
    opacity: 0.20;
    color: #c4b5fd;
    animation: sparkle 3s ease-in-out infinite;
  }
  
  @keyframes sparkle {
    0%,100% { opacity: 0.15; transform: scale(0.9) rotate(0deg); }
    50%      { opacity: 0.45; transform: scale(1.1) rotate(180deg); }
  }
  
  /* Win cell */
  .b5050-cell.is-win {
    background: rgba(167,139,250,0.18);
    border-color: rgba(167,139,250,0.55);
    box-shadow:
      0 0 24px rgba(167,139,250,0.5),
      0 0 48px rgba(244,114,182,0.30),
      inset 0 1px 0 rgba(255,255,255,0.25),
      inset 0 0 20px rgba(167,139,250,0.12);
    transform: scale(1.04);
    text-shadow:
      0 0 28px rgba(255,255,255,1),
      0 0 44px rgba(167,139,250,1);
  }
  
  /* VS / lightning */
  .b5050-vs {
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
  
    font-weight: 900;
    letter-spacing: 3px;
    font-size: 15px;
    color: rgba(255,255,255,0.9);
  
    text-shadow:
      0 0 16px rgba(167,139,250,0.8),
      0 0 32px rgba(244,114,182,0.7);
    opacity: 0.95;
  }
  
  .b5050-lightning-icon {
    width: 44px;
    height: 44px;
    object-fit: contain;
    filter:
      drop-shadow(0 0 14px rgba(167,139,250,0.9))
      drop-shadow(0 0 22px rgba(244,114,182,0.6))
      drop-shadow(0 6px 18px rgba(0,0,0,0.5))
      brightness(1.15);
    animation: glassLightningPulse 2000ms ease-in-out infinite;
  }
  
  @keyframes glassLightningPulse {
    0%   { filter: drop-shadow(0 0 10px rgba(167,139,250,0.7)) drop-shadow(0 0 18px rgba(244,114,182,0.5)) brightness(1.05); transform: scale(0.97) rotate(-1deg); }
    50%  { filter: drop-shadow(0 0 22px rgba(167,139,250,1))   drop-shadow(0 0 34px rgba(244,114,182,0.9)) brightness(1.25); transform: scale(1.08) rotate(2deg); }
    100% { filter: drop-shadow(0 0 12px rgba(167,139,250,0.8)) drop-shadow(0 0 20px rgba(244,114,182,0.6)) brightness(1.10); transform: scale(1)    rotate(-0.5deg); }
  }
  
  /* Center line — refractive line */
  .b5050-centerline {
    position: absolute;
    left: 16px; right: 16px;
    top: 50%;
    transform: translateY(-50%);
    height: 2px;
    border-radius: 99px;
    z-index: 3;
    pointer-events: none;
  
    background: linear-gradient(90deg,
      rgba(79,70,229,0) 0%,
      rgba(139,92,246,0.8) 20%,
      rgba(255,255,255,0.95) 50%,
      rgba(244,114,182,0.8) 80%,
      rgba(236,72,153,0) 100%);
    box-shadow:
      0 0 14px rgba(167,139,250,0.7),
      0 0 28px rgba(244,114,182,0.5),
      0 0 6px rgba(255,255,255,0.8);
  }
  
  /* Result */
  .b5050-result {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  
    font-weight: 900;
    font-size: 92px;
    color: #fff;
  
    text-shadow:
      0 0 36px rgba(167,139,250,1),
      0 0 72px rgba(244,114,182,0.8),
      0 16px 36px rgba(0,0,0,0.7);
  
    opacity: 0;
    transform: scale(0.92);
    pointer-events: none;
    z-index: 10000000;
    transition: opacity 280ms ease, transform 380ms var(--spring);
  }
  
  /* Result mode collapse */
  .b5050-machine--collapse .b5050-bulbs {
    opacity: 0;
    transform: translateY(-6px) scale(0.98);
    transition: opacity 400ms ease, transform 400ms ease;
  }
  .b5050-machine--collapse .b5050-bulb { animation: none !important; }
  
  .b5050-machine--collapse .b5050-unit,
  .b5050-machine--collapse .b5050-vs {
    opacity: 0;
    transform: translateY(-10px) scale(0.975);
    pointer-events: none;
    transition: opacity 640ms ease, transform 640ms var(--smooth);
  }
  
  .b5050-machine--result .b5050-unit,
  .b5050-machine--result .b5050-vs {
    opacity: 0; transform: translateY(-6px) scale(0.985);
    pointer-events: none;
    transition: opacity 220ms ease, transform 220ms ease;
  }
  .b5050-machine--result .b5050-result { opacity: 1; transform: scale(1); }
  
  /* Flying X labels */
  .b5050-flyx {
    position: fixed;
    transform: translate3d(-50%,-50%,0);
    z-index: 10000000;
    pointer-events: none;
    font-weight: 900;
    font-size: 56px;
    color: #fff;
    padding: 10px 16px;
  }
  .b5050-flyx--good { text-shadow: 0 0 28px rgba(139,92,246,1), 0 0 54px rgba(79,70,229,0.8), 0 8px 28px rgba(0,0,0,0.5); }
  .b5050-flyx--bad  { text-shadow: 0 0 28px rgba(244,114,182,1), 0 0 54px rgba(236,72,153,0.8), 0 8px 28px rgba(0,0,0,0.5); }
  
  .b5050-flyx--idle  { animation: b5050Idle  1200ms ease-in-out infinite; }
  .b5050-flyx--clash { animation: b5050Clash 200ms ease both; }
  
  @keyframes b5050Idle  { 0%,100%{transform:translate3d(-50%,-50%,0) scale(1); opacity:.95;} 50%{transform:translate3d(-50%,-50%,0) scale(1.04); opacity:1;} }
  @keyframes b5050Clash { 0%{transform:translate3d(-50%,-50%,0) scale(1);} 60%{transform:translate3d(-50%,-50%,0) scale(1.22);} 100%{transform:translate3d(-50%,-50%,0) scale(0.98);} }
  
  /* Shake */
  .b5050-shake { animation: b5050Shake 240ms ease both; }
  @keyframes b5050Shake {
    0%  { transform:translate3d(0,0,0); }
    25% { transform:translate3d(2px,-2px,0); }
    50% { transform:translate3d(-2px,2px,0); }
    75% { transform:translate3d(2px,1px,0); }
    100%{ transform:translate3d(0,0,0); }
  }
  
  /* Boom */
  .b5050-boom {
    position: fixed;
    transform: translate3d(-50%,-50%,0) scale(0.85);
    z-index: 10000007;
    pointer-events: none;
    width: 240px; height: 240px;
    object-fit: contain;
    opacity: 0;
    filter:
      drop-shadow(0 0 36px rgba(167,139,250,0.85))
      drop-shadow(0 0 56px rgba(244,114,182,0.75))
      drop-shadow(0 20px 56px rgba(0,0,0,0.65));
  }
  .b5050-boom.is-on { opacity: 1; transform:translate3d(-50%,-50%,0) scale(1); transition: opacity 140ms ease, transform 360ms var(--spring); }
  .b5050-boom.is-off{ opacity: 0; transform:translate3d(-50%,-50%,0) scale(1.12); transition: opacity 520ms ease, transform 520ms ease; }
  
  /* Particle */
  .b5050-particle {
    position: fixed;
    transform: translate3d(-50%,-50%,0);
    z-index: 10000006;
    pointer-events: none;
    object-fit: contain;
    opacity: 0;
    filter:
      drop-shadow(0 0 18px rgba(167,139,250,0.65))
      drop-shadow(0 0 28px rgba(244,114,182,0.5))
      drop-shadow(0 14px 44px rgba(0,0,0,0.55));
  }
  
  /* Flash — prismatic burst */
  .b5050-flash {
    position: fixed;
    transform: translate3d(-50%,-50%,0) scale(0.6);
    width: 440px; height: 440px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 10000006;
    opacity: 0;
    background: radial-gradient(circle,
      rgba(255,255,255,0.95) 0%,
      rgba(167,139,250,0.65) 14%,
      rgba(244,114,182,0.45) 28%,
      rgba(139,92,246,0.18) 48%,
      rgba(0,0,0,0) 72%);
    filter: blur(3px);
  }
  .b5050-flash.is-on { animation: b5050Flash 540ms ease forwards; }
  @keyframes b5050Flash {
    0%  { opacity:0; transform:translate3d(-50%,-50%,0) scale(0.5); }
    20% { opacity:1; transform:translate3d(-50%,-50%,0) scale(0.92); }
    100%{ opacity:0; transform:translate3d(-50%,-50%,0) scale(1.18); }
  }
  
  /* Ring */
  .b5050-ring {
    position: fixed;
    transform: translate3d(-50%,-50%,0) scale(0.2);
    width: 360px; height: 360px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 10000005;
    opacity: 0;
    border: 2px solid rgba(167,139,250,0.7);
    box-shadow:
      0 0 32px rgba(167,139,250,0.5),
      0 0 64px rgba(244,114,182,0.35),
      inset 0 0 32px rgba(255,255,255,0.1);
  }
  .b5050-ring.is-on { animation: b5050Ring 800ms ease forwards; }
  @keyframes b5050Ring {
    0%  { opacity:0; transform:translate3d(-50%,-50%,0) scale(0.18); border-color:rgba(167,139,250,0.8); }
    25% { opacity:0.9; border-color:rgba(244,114,182,0.8); }
    100%{ opacity:0; transform:translate3d(-50%,-50%,0) scale(1.28); border-color:rgba(236,72,153,0.3); }
  }
  
  /* Dimmed / picked */
  .b5050-cell.is-dim  { opacity:0.35; filter:saturate(0.4) brightness(0.8); }
  .b5050-cell.is-picked {
    box-shadow:
      0 0 24px rgba(167,139,250,0.65),
      0 0 44px rgba(244,114,182,0.4),
      inset 0 0 16px rgba(255,255,255,0.10);
  }
  
  
  /* ================================================================
     ██╗      ██████╗  ██████╗  ████████╗    ██████╗  ██╗   ██╗ ███████╗ ██╗  ██╗
     ██║     ██╔═══██╗██╔═══██╗ ╚══██╔══╝    ██╔══██╗ ██║   ██║ ██╔════╝ ██║  ██║
     ██║     ██║   ██║██║   ██║    ██║       ██████╔╝ ██║   ██║ ███████╗ ███████║
     ██║     ██║   ██║██║   ██║    ██║       ██╔══██╗ ██║   ██║ ╚════██║ ██╔══██║
     ███████╗╚██████╔╝╚██████╔╝    ██║       ██║  ██║ ╚██████╔╝ ███████║ ██║  ██║
     LOOT RUSH  —  VIOLET–FUCHSIA LIQUID GLASS
     ================================================================ */
  
  /* Cutscene wrapper */
  .lr-cutscene {
    width: 100%;
    max-width: 500px;
    margin: 56px auto 0;
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 24px;
    animation: lrFadeIn 0.55s var(--spring) forwards;
  }
  
  @keyframes lrFadeIn {
    from { opacity:0; transform:translateY(24px) scale(0.95); }
    to   { opacity:1; transform:translateY(0) scale(1); }
  }
  
  /* Grid */
  .lr-grid {
    display: grid;
    grid-template-columns: repeat(4, minmax(0,1fr)) !important;
    gap: 12px;
    width: 100%;
    max-width: 460px;
    margin: 0 auto;
    order: 1;
  }
  
  /* Bottom */
  .lr-bottom {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 14px;
    order: 2;
  }
  
  /* Title — gradient chrome text */
  .lr-title {
    font-size: 22px;
    font-weight: 900;
    text-align: center;
    letter-spacing: 0.03em;
    text-transform: uppercase;
  
    background: linear-gradient(135deg,
      #c084fc 0%,
      #f0abfc 35%,
      #e879f9 65%,
      #a855f7 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  
    filter: drop-shadow(0 2px 12px rgba(192,132,252,0.4));
  
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.5s var(--spring);
  }
  .lr-title.lr-show { opacity:1; transform:translateY(0); }
  
  /* Timer */
  .lr-timer {
    font-size: 56px;
    font-weight: 900;
    line-height: 1;
    min-height: 56px;
  
    background: linear-gradient(180deg,
      #fff 0%,
      #e879f9 45%,
      #a855f7 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 4px 14px rgba(168,85,247,0.5));
  
    transition: all 0.3s ease;
  }
  
  .lr-timer-hidden  { opacity:0; transform:scale(0.8) translateY(-10px); pointer-events:none; }
  .lr-timer-visible { opacity:1; transform:scale(1) translateY(0); animation:lrTimerAppear 0.6s var(--spring) forwards; }
  
  @keyframes lrTimerAppear {
    0%  { opacity:0; transform:scale(0.5) translateY(-20px); }
    60% { transform:scale(1.08) translateY(0); }
    100%{ opacity:1; transform:scale(1) translateY(0); }
  }
  
  .lr-timer-pulse { animation:lrTimerPulse 0.4s var(--spring); }
  @keyframes lrTimerPulse {
    0%,100%{ transform:scale(1); }
    50%    { transform:scale(1.18); }
  }
  
  /* Tile base — fully transparent, image-only */
  .lr-tile {
    position: relative;
    aspect-ratio: 1;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    border-radius: 18px;
    overflow: visible;
    cursor: default;
    transition: all 0.32s var(--spring);
    padding: 0;
    will-change: transform, opacity;
    backface-visibility: hidden;
  }
  
  /* Multiplier (hidden under bag) */
  .lr-mult {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 20px;
    color: #fff;
    text-shadow:
      0 2px 8px rgba(0,0,0,0.6),
      0 0 16px rgba(168,85,247,0.5);
    z-index: 1;
    opacity: 0;
    transform: scale(0.8) translateY(-8px);
  }
  
  .lr-tile.lr-mult-show .lr-mult,
  .lr-tile.lr-reveal .lr-mult {
    animation: lrMultShow 0.3s ease forwards;
    opacity: 1 !important;
    transform: scale(1) translateY(0) !important;
    transition: opacity .3s ease, transform .3s ease;
  }
  
  @keyframes lrMultShow {
    from { opacity:0; transform:scale(0.8); }
    to   { opacity:1; transform:scale(1); }
  }
  
  /* Bag */
  .lr-bag {
    position: absolute;
    inset: 0;
    width: 110% !important;
    height: 110% !important;
    padding: 5% !important;
    object-fit: contain;
    opacity: 0;
    transform: translateY(-100%) rotate(-10deg);
    z-index: 2;
    filter:
      drop-shadow(0 8px 20px rgba(0,0,0,0.55))
      drop-shadow(0 0 12px rgba(168,85,247,0.15));
    transition: all 0.32s var(--spring);
  }
  
  .lr-tile.lr-covered .lr-bag {
    animation: lrBagDrop 0.52s var(--spring) forwards;
  }
  
  @keyframes lrBagDrop {
    from { opacity:0; transform:translateY(-100%) rotate(-10deg) scale(0.8); }
    60%  { transform:translateY(4%) rotate(1.5deg) scale(1.04); }
    to   { opacity:1; transform:translateY(0) rotate(0deg) scale(1); }
  }
  
  /* Spinning */
  .lr-tile.lr-spinning .lr-bag { transition: opacity 0.12s ease, transform 0.12s ease; }
  
  /* Alternating shift animations for spinning grid rows */
  .lr-spinning[data-index="0"],.lr-spinning[data-index="1"],.lr-spinning[data-index="2"],.lr-spinning[data-index="3"] { animation:lrShiftRight 0.3s ease-in-out infinite; }
  .lr-spinning[data-index="4"],.lr-spinning[data-index="5"],.lr-spinning[data-index="6"],.lr-spinning[data-index="7"] { animation:lrShiftLeft  0.3s ease-in-out infinite; }
  .lr-spinning[data-index="8"],.lr-spinning[data-index="9"],.lr-spinning[data-index="10"],.lr-spinning[data-index="11"]{ animation:lrShiftRight 0.3s ease-in-out infinite; }
  .lr-spinning[data-index="12"],.lr-spinning[data-index="13"],.lr-spinning[data-index="14"],.lr-spinning[data-index="15"]{ animation:lrShiftLeft 0.3s ease-in-out infinite; }
  .lr-spinning[data-index="16"],.lr-spinning[data-index="17"],.lr-spinning[data-index="18"],.lr-spinning[data-index="19"]{ animation:lrShiftRight 0.3s ease-in-out infinite; }
  .lr-spinning[data-index="20"],.lr-spinning[data-index="21"],.lr-spinning[data-index="22"],.lr-spinning[data-index="23"]{ animation:lrShiftLeft  0.3s ease-in-out infinite; }
  
  @keyframes lrShiftRight { 0%,100%{transform:translateX(0);} 50%{transform:translateX(4px);} }
  @keyframes lrShiftLeft  { 0%,100%{transform:translateX(0);} 50%{transform:translateX(-4px);} }
  
  /* Selectable */
  .lr-tile.lr-selectable { cursor: pointer; }
  .lr-tile.lr-selectable:hover { transform: translateY(-7px) scale(1.09); }
  .lr-tile.lr-selectable:active { transform: translateY(-2px) scale(1.02); transition: all 0.1s var(--spring); }
  .lr-tile.lr-selectable:active .lr-bag { filter: drop-shadow(0 8px 22px rgba(0,0,0,0.6)) brightness(1.12); }
  
  /* Selected tile — liquid glass glow aura */
  .lr-tile.lr-selected {
    position: relative;
    border-radius: 18px;
    transform: translateY(-7px) scale(1.09);
    z-index: 10;
    transition: all 0.5s var(--spring);
    overflow: visible;
  }
  
  .lr-tile.lr-selected::before {
    content: '';
    position: absolute;
    inset: -55%;
    background:
      radial-gradient(ellipse 75% 55% at 25% 45%, rgba(192,132,252,0.42) 0%, transparent 55%),
      radial-gradient(ellipse 65% 65% at 75% 35%, rgba(232,121,249,0.36) 0%, transparent 55%),
      radial-gradient(ellipse 85% 45% at 50% 70%, rgba(168,85,247,0.32) 0%, transparent 55%);
    filter: blur(22px);
    animation: lrAuraDrift1 8s ease-in-out infinite;
    opacity: 0.88;
    pointer-events: none;
    z-index: -1;
    border-radius: 50%;
  }
  
  .lr-tile.lr-selected::after {
    content: '';
    position: absolute;
    inset: -45%;
    background:
      radial-gradient(ellipse 55% 70% at 55% 40%, rgba(240,171,252,0.46) 0%, transparent 55%),
      radial-gradient(ellipse 70% 50% at 30% 60%, rgba(196,40,255,0.38) 0%, transparent 55%),
      radial-gradient(ellipse 80% 60% at 70% 25%, rgba(232,121,249,0.34) 0%, transparent 55%);
    filter: blur(18px);
    animation: lrAuraDrift2 6s ease-in-out infinite;
    opacity: 0.92;
    pointer-events: none;
    z-index: -2;
    border-radius: 50%;
  }
  
  @keyframes lrAuraDrift1 {
    0%,100%{ transform:translate(0,0) scale(1) rotate(0deg); opacity:.88; }
    25%    { transform:translate(-7px,-9px) scale(1.08) rotate(2deg); opacity:.96; }
    50%    { transform:translate(-4px,7px) scale(0.96) rotate(-1deg); opacity:.82; }
    75%    { transform:translate(9px,-4px) scale(1.04) rotate(1deg); opacity:.92; }
  }
  @keyframes lrAuraDrift2 {
    0%,100%{ transform:translate(0,0) scale(1) rotate(0deg); opacity:.92; }
    33%    { transform:translate(11px,7px) scale(1.07) rotate(-2deg); opacity:1; }
    66%    { transform:translate(-9px,-11px) scale(0.98) rotate(2deg); opacity:.86; }
  }
  
  /* Reveal */
  .lr-tile.lr-reveal .lr-bag {
    opacity: 0 !important;
    transform: scale(0.9) rotate(-10deg) !important;
    transition: opacity .3s ease, transform .3s ease;
  }
  .lr-tile.lr-reveal .lr-mult {
    opacity: 1 !important;
    transform: scale(1) translateY(0) !important;
    transition: opacity .3s ease, transform .3s ease;
    z-index: 3;
  }
  
  /* Winner */
  .lr-tile.lr-winner .lr-mult {
    background: linear-gradient(135deg, #fde68a, #fbbf24, #f59e0b);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 20px rgba(251,191,36,0.8));
    transform: scale(1.4) !important;
    animation: lrWinnerPulse 1s ease-in-out infinite;
  }
  
  @keyframes lrWinnerPulse {
    0%,100%{ transform:scale(1.4) rotate(0deg); filter:drop-shadow(0 0 20px rgba(251,191,36,0.8)); }
    50%    { transform:scale(1.5) rotate(3deg); filter:drop-shadow(0 0 38px rgba(251,191,36,1)) drop-shadow(0 0 60px rgba(251,191,36,0.5)); }
  }
  
  /* Picked */
  .lr-tile.lr-picked {
    border-radius: 18px;
    box-shadow:
      0 0 0 2.5px rgba(251,191,36,0.75),
      0 0 36px rgba(251,191,36,0.7),
      0 0 72px rgba(251,191,36,0.35);
    animation: lrPickedGlow 1.2s ease-in-out infinite;
  }
  
  @keyframes lrPickedGlow {
    0%,100%{ box-shadow: 0 0 0 2.5px rgba(251,191,36,0.75), 0 0 36px rgba(251,191,36,0.7); }
    50%    { box-shadow: 0 0 0 3.5px rgba(251,191,36,0.9), 0 0 56px rgba(251,191,36,1), 0 0 90px rgba(251,191,36,0.5); }
  }
  
  /* Performance */
  .lr-tile, .lr-mult, .lr-bag { will-change:transform,opacity; backface-visibility:hidden; -webkit-font-smoothing:antialiased; }
  .lr-tile.lr-reveal { animation: removeWillChange 0.5s 1s forwards; }
  @keyframes removeWillChange { to { will-change:auto; } }
  
  /* Responsive */
  @media (max-width: 420px) {
    .lr-cutscene { padding:16px; gap:18px; }
    .lr-title    { font-size:18px; }
    .lr-timer    { font-size:46px; }
    .lr-grid     { gap:9px; }
    .lr-mult     { font-size:18px; }
  }
  @media (max-width: 360px) {
    .lr-grid  { gap:7px; }
    .lr-mult  { font-size:16px; }
    .lr-timer { font-size:40px; }
  }
  
  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    .lr-tile,.lr-mult,.lr-bag,.lr-title,.lr-timer,.lr-cutscene { animation:none !important; transition:none !important; }
    .lr-tile.lr-mult-show .lr-mult,.lr-tile.lr-covered .lr-bag,.lr-tile.lr-reveal .lr-mult,.lr-tile.lr-reveal .lr-bag { opacity:1 !important; transform:none !important; }
  }
  @media (prefers-contrast: high) {
    .lr-tile.lr-selected { outline: 2px solid #f0abfc; }
  }
  
  
  /* ================================================================
     ██╗    ██╗ ██╗ ██╗      ██████╗      ████████╗ ██╗ ███╗   ███╗ ███████╗
     ██║    ██║ ██║ ██║      ██╔══██╗        ██╔══╝ ██║ ████╗ ████║ ██╔════╝
     ██║ █╗ ██║ ██║ ██║      ██║  ██║        ██║    ██║ ██╔████╔██║ █████╗
     ██║███╗██║ ██║ ██║      ██║  ██║        ██║    ██║ ██║╚██╔╝██║ ██╔══╝
     ╚███╔███╔╝ ██║ ███████╗ ██████╔╝        ██║    ██║ ██║ ╚═╝ ██║ ███████╗
     WILD TIME  —  AMBER–GOLD LIQUID GLASS
     ================================================================ */
  
  #wildTimeOverlay.wt-overlay {
    position: fixed;
    inset: 0;
    z-index: 999999;
    display: none;
    align-items: center;
    justify-content: center;
  
    opacity: 0;
    pointer-events: none;
    transition: opacity 400ms var(--smooth);
  }
  
  #wildTimeOverlay.wt-overlay.wt-active {
    opacity: 1;
    pointer-events: auto;
  }
  #wildTimeOverlay.wt-overlay.wt-leave {
    opacity: 0;
    transition: opacity 300ms ease-out;
  }
  
  /* Backdrop — warm amber aurora */
  #wildTimeOverlay .wt-backdrop {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 55% 50% at 30% 45%, rgba(245,158,11,0.16) 0%, transparent 55%),
      radial-gradient(ellipse 50% 55% at 70% 55%, rgba(234,88,12,0.13) 0%, transparent 55%),
      linear-gradient(160deg, rgba(0,0,0,0.88) 0%, rgba(18,10,2,0.95) 100%);
    backdrop-filter: blur(22px) brightness(0.65) saturate(1.25);
    -webkit-backdrop-filter: blur(22px) brightness(0.65) saturate(1.25);
  }
  
  #wildTimeOverlay .wt-backdrop::before,
  #wildTimeOverlay .wt-backdrop::after {
    content: '';
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    pointer-events: none;
  }
  #wildTimeOverlay .wt-backdrop::before {
    width: 55vw; height: 55vw;
    top: -15%; left: -20%;
    background: rgba(245,158,11,0.10);
    animation: wtAurora1 16s ease-in-out infinite;
  }
  #wildTimeOverlay .wt-backdrop::after {
    width: 48vw; height: 48vw;
    bottom: -10%; right: -18%;
    background: rgba(239,68,68,0.07);
    animation: wtAurora2 20s ease-in-out infinite;
  }
  
  @keyframes wtAurora1 {
    0%,100%{ transform:translate(0,0) scale(1); opacity:.7; }
    40%    { transform:translate(6%,8%) scale(1.12); opacity:1; }
    70%    { transform:translate(-4%,5%) scale(0.96); opacity:.8; }
  }
  @keyframes wtAurora2 {
    0%,100%{ transform:translate(0,0) scale(1); opacity:.6; }
    35%    { transform:translate(-7%,-6%) scale(1.08); opacity:.9; }
    65%    { transform:translate(4%,3%) scale(1.03); opacity:.75; }
  }
  
  /* Container */
  #wildTimeOverlay .wt-container {
    position: relative;
    z-index: 1;
    width: min(980px, 98vw);
    height: min(980px, 98vh);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* ---- Wheel stage ---- */
  #wildTimeOverlay .wt-stage {
    position: relative;
    width: min(820px, 96vw);
    aspect-ratio: 1;
    overflow: visible;
    opacity: 1;
    transform: scale(1);
    transition:
      opacity 400ms var(--smooth),
      transform 500ms var(--spring);
  
    --ptr-r: 340px;
    filter: drop-shadow(0 0 50px rgba(245,158,11,0.28));
  }
  
  #wildTimeOverlay .wt-stage::before {
    content: '';
    position: absolute;
    inset: -44px;
    background: radial-gradient(circle, rgba(253,210,100,0.10) 0%, transparent 70%);
    pointer-events: none;
    animation: wtStageGlow 3.5s ease-in-out infinite;
  }
  @keyframes wtStageGlow {
    0%,100%{ opacity:.55; transform:scale(1); }
    50%    { opacity:1; transform:scale(1.06); }
  }
  
  #wildTimeOverlay .wt-stage.wt-stage--hide {
    opacity: 0;
    transform: scale(0.92) translateY(22px);
    pointer-events: none;
  }
  
  #wildTimeOverlay #wildTimeCanvas {
    width: 100%; height: 100%;
    display: block;
    border-radius: 50%;
    box-shadow:
      0 0 0 2px rgba(253,210,100,0.18),
      0 0 0 5px rgba(253,210,100,0.08),
      0 32px 80px rgba(0,0,0,0.5);
  }
  
  /* Pointers */
  #wildTimeOverlay .wt-pointer {
    position: absolute;
    left: 50%; top: 50%;
    width: clamp(50px, 6.5vw, 68px);
    height: auto;
    pointer-events: none;
    opacity: 0;
    transition: opacity 300ms ease 200ms;
    filter:
      drop-shadow(0 10px 22px rgba(0,0,0,0.6))
      drop-shadow(0 0 10px rgba(245,158,11,0.5));
    transform:
      translate(-50%, -50%)
      rotate(var(--ang))
      translateY(calc(-1 * var(--ptr-r)));
    animation: wtPointerPulse 2.2s ease-in-out infinite;
    animation-delay: calc(var(--ang) * 0.1s);
  }
  
  #wildTimeOverlay.wt-active .wt-pointer { opacity: 0.97; }
  
  @keyframes wtPointerPulse {
    0%,100%{ filter:drop-shadow(0 10px 22px rgba(0,0,0,0.6)) drop-shadow(0 0 10px rgba(245,158,11,0.4)); }
    50%    { filter:drop-shadow(0 10px 22px rgba(0,0,0,0.6)) drop-shadow(0 0 20px rgba(245,158,11,0.75)); }
  }
  
  /* ---- Jar game ---- */
  #wildTimeOverlay .wt-jarGame {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: clamp(12px, 2.5vh, 22px);
  
    opacity: 0;
    pointer-events: none;
    transform: translateY(32px) scale(0.95);
    transition:
      opacity 460ms var(--smooth),
      transform 560ms var(--spring);
  }
  #wildTimeOverlay .wt-jarGame.wt-jarGame--show {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0) scale(1);
  }
  
  /* Jar row */
  #wildTimeOverlay .wt-jarRow {
    position: relative;          /* ← REQUIRED: jars are position:absolute inside */
    width: min(980px, 96vw);
    min-height: clamp(240px, 36vh, 460px);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: clamp(20px, 7.5vw, 150px);
    padding: clamp(20px, 5vw, 50px) clamp(16px, 4.5vw, 50px);
  }
  
  /* Jar slot */
  #wildTimeOverlay .wt-slot {
    flex: 1;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }
  
  /* Multiplier text — liquid gold */
  #wildTimeOverlay .wt-mult {
    font-weight: 900;
    font-size: clamp(48px, 11vw, 120px);
    background: linear-gradient(180deg,
      #fff 0%,
      #fde68a 30%,
      #fbbf24 65%,
      #f59e0b 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 0.02em;
    line-height: 1;
    margin: 0;
    opacity: 1;
    transform: translateY(0) scale(1);
    transition:
      opacity 360ms var(--smooth),
      transform 360ms var(--spring);
    white-space: nowrap;
    filter:
      drop-shadow(0 4px 10px rgba(0,0,0,0.55))
      drop-shadow(0 0 18px rgba(251,191,36,0.25));
    position: relative;
  }
  
  /* Gloss shine on mult text */
  #wildTimeOverlay .wt-mult::after {
    content: attr(data-mult);
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.32) 0%, transparent 48%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: blur(1px);
    opacity: 0.55;
  }
  
  #wildTimeOverlay .wt-mult.wt-mult--hidden {
    opacity: 0;
    transform: translateY(10px) scale(0.9);
  }
  
  /* Selected multiplier — spectacular */
  #wildTimeOverlay .wt-mult.wt-mult--selected {
    animation:
      wtMultIn 0.85s var(--spring) forwards,
      wtMultPulse 3.5s ease-in-out 0.85s infinite;
  }
  
  @keyframes wtMultIn {
    0%  { transform:scale(0.6) translateY(20px); opacity:0; }
    60% { transform:scale(1.12) translateY(-6px); opacity:1; }
    100%{ transform:scale(1) translateY(0); opacity:1; }
  }
  @keyframes wtMultPulse {
    0%,100%{ filter:drop-shadow(0 4px 10px rgba(0,0,0,0.55)) drop-shadow(0 0 18px rgba(251,191,36,0.3)); }
    50%    { filter:drop-shadow(0 4px 10px rgba(0,0,0,0.55)) drop-shadow(0 0 36px rgba(251,191,36,0.7)) drop-shadow(0 0 64px rgba(251,191,36,0.4)); }
  }
  
  /* Jar buttons — absolutely positioned inside .wt-jarRow via CSS vars */
  #wildTimeOverlay .wt-jarBtn {
    position: absolute;
    left: 0;
    top: 0;
  
    /* The core positioning transform — all movement goes through here */
    transform:
      translate(var(--x, 0px), var(--y, 0px))
      rotate(var(--rot, 0deg))
      translateY(calc(-1 * var(--lift, 0px)));
  
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  
    /* Subtle float via margin-top — doesn't conflict with transform transitions */
    margin-top: 0px;
    will-change: transform, margin-top;
  }
  
  /* Floating hover animation: uses margin-top so it never conflicts with
     the transform-based positioning transitions during shuffle / lift.    */
  #wildTimeOverlay .wt-jarBtn--floating {
    animation: wtJarFloat 2.6s cubic-bezier(0.45, 0, 0.55, 1) infinite;
  }
  
  @keyframes wtJarFloat {
    0%, 100% { margin-top:  0px; }
    25%       { margin-top: -5px; }
    50%       { margin-top: -11px; }
    75%       { margin-top: -5px; }
  }
  
  /* Selectable state */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--selectable {
    cursor: pointer;
  }
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--selectable:hover {
    transform:
      translate(var(--x, 0px), var(--y, 0px))
      rotate(var(--rot, 0deg))
      translateY(calc(-1 * var(--lift, 0px)))
      scale(1.07) translateY(-8px);
  }
  #wildTimeOverlay .wt-jarBtn:active {
    transform:
      translate(var(--x, 0px), var(--y, 0px))
      rotate(var(--rot, 0deg))
      translateY(calc(-1 * var(--lift, 0px)))
      scale(0.96);
  }
  
  /* Hover glow aura */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--selectable:hover::after {
    content: '';
    position: absolute;
    inset: -15%;
    background: radial-gradient(ellipse at center,
      rgba(245,158,11,0.22) 0%,
      rgba(251,191,36,0.10) 40%,
      transparent 70%);
    border-radius: 50%;
    filter: blur(16px);
    pointer-events: none;
    animation: wtHoverAura 1.8s ease-in-out infinite;
  }
  @keyframes wtHoverAura {
    0%,100%{ opacity:.75; transform:scale(1); }
    50%    { opacity:1; transform:scale(1.08); }
  }
  
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--lift {
    transition: transform 650ms cubic-bezier(0.22, 0.61, 0.36, 1) !important;
  }
  
  /* When --lift var is set, the transform above already handles it.
     The lift class just enables a smoother transition for the upward reveal. */
  
  #wildTimeOverlay .wt-jarImg {
    width: clamp(80px, 20vw, 200px);
    height: auto;
    display: block;
    object-fit: contain;
    filter:
      drop-shadow(0 20px 36px rgba(0,0,0,0.65))
      drop-shadow(0 0 18px rgba(245,158,11,0.20));
    transition: filter 300ms ease;
    will-change: filter;
  }
  
  /* Jar shuffle state */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--shuffling .wt-jarImg {
    filter:
      drop-shadow(0 22px 38px rgba(0,0,0,0.7))
      drop-shadow(0 0 22px rgba(245,158,11,0.55))
      drop-shadow(0 0 44px rgba(245,158,11,0.28))
      brightness(1.14)
      contrast(1.06)
      saturate(1.1);
    animation: jarShuffleGlow 0.3s ease-in-out infinite alternate;
  }
  
  @keyframes jarShuffleGlow {
    from{ filter:drop-shadow(0 22px 38px rgba(0,0,0,0.7)) drop-shadow(0 0 18px rgba(245,158,11,0.45)) brightness(1.1); }
    to  { filter:drop-shadow(0 22px 38px rgba(0,0,0,0.7)) drop-shadow(0 0 30px rgba(245,158,11,0.75)) brightness(1.2); }
  }
  
  /* Glass aura during shuffle */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--shuffling::before {
    content: '';
    position: absolute;
    inset: -12%;
    background: radial-gradient(ellipse at center,
      rgba(245,158,11,0.22) 0%,
      rgba(251,191,36,0.12) 40%,
      transparent 70%);
    border-radius: 50%;
    animation: wtShuffleAura 0.4s ease-in-out infinite;
    pointer-events: none;
    z-index: -1;
  }
  @keyframes wtShuffleAura {
    0%,100%{ opacity:.7; transform:scale(1) rotate(0deg); }
    50%    { opacity:1; transform:scale(1.18) rotate(180deg); }
  }
  
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--lift {
    transition: transform 600ms cubic-bezier(0.22, 0.61, 0.36, 1) !important;
  }
  
  /* Chosen jar */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--chosen .wt-jarImg {
    filter:
      drop-shadow(0 24px 44px rgba(0,0,0,0.72))
      drop-shadow(0 0 28px rgba(245,158,11,0.65))
      drop-shadow(0 0 56px rgba(245,158,11,0.30));
    animation: jarChosen 0.6s var(--spring);
  }
  @keyframes jarChosen {
    0%,100%{ transform:rotate(0deg); }
    25%    { transform:rotate(-3deg); }
    75%    { transform:rotate(3deg); }
  }
  
  /* Picked jar */
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--picked { --s:1.06; }
  #wildTimeOverlay .wt-jarBtn.wt-jarBtn--picked .wt-jarImg {
    filter:
      drop-shadow(0 20px 34px rgba(0,0,0,0.65))
      drop-shadow(0 0 24px rgba(255,255,255,0.4))
      drop-shadow(0 0 48px rgba(245,158,11,0.35));
    animation: jarPicked 0.5s ease-in-out infinite;
  }
  @keyframes jarPicked {
    0%,100%{ filter:drop-shadow(0 20px 34px rgba(0,0,0,0.65)) drop-shadow(0 0 24px rgba(255,255,255,0.4)) drop-shadow(0 0 48px rgba(245,158,11,0.35)); }
    50%    { filter:drop-shadow(0 20px 34px rgba(0,0,0,0.65)) drop-shadow(0 0 36px rgba(255,255,255,0.6)) drop-shadow(0 0 68px rgba(245,158,11,0.55)); }
  }
  
  /* Hint text */
  #wildTimeOverlay .wt-hint {
    color: rgba(255,255,255,0.95);
    font-weight: 800;
    font-size: clamp(16px, 3.5vw, 22px);
    letter-spacing: 0.05em;
    text-transform: uppercase;
    pointer-events: none;
    text-shadow:
      0 2px 4px rgba(0,0,0,0.5),
      0 0 18px rgba(245,158,11,0.35);
    animation: wtHintPulse 2s ease-in-out infinite;
  }
  @keyframes wtHintPulse {
    0%,100%{ opacity:.88; }
    50%    { opacity:1; }
  }
  
  /* Countdown */
  #wildTimeOverlay .wt-countdown {
    margin-top: 4px;
    opacity: 0;
    background: linear-gradient(180deg, #fff 0%, #fde68a 45%, #f59e0b 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 900;
    font-size: clamp(50px, 12vw, 100px);
    letter-spacing: 0.02em;
    filter: drop-shadow(0 4px 12px rgba(0,0,0,0.6));
    transform: scale(0.9);
    transition:
      opacity 300ms ease,
      transform 400ms var(--spring);
    pointer-events: none;
  }
  #wildTimeOverlay .wt-countdown.wt-countdown--show {
    opacity: 1;
    transform: scale(1);
    animation: wtCountdownTick 1s ease-in-out infinite;
  }
  @keyframes wtCountdownTick {
    0%  { transform:scale(1); }
    10% { transform:scale(1.14); }
    20% { transform:scale(1); }
  }
  
  /* Win reveal */
  #wildTimeOverlay .wt-win.wt-win--show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  
  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    #wildTimeOverlay *,
    #wildTimeOverlay *::before,
    #wildTimeOverlay *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  
  /* Mobile Wild Time */
  @media (max-width: 768px) {
    #wildTimeOverlay .wt-jarRow {
      gap: clamp(12px, 5vw, 80px);
      padding: clamp(16px, 4vw, 30px) clamp(12px, 3vw, 25px);
    }
    #wildTimeOverlay .wt-mult     { font-size:clamp(40px, 12vw, 100px); }
    #wildTimeOverlay .wt-countdown{ font-size:clamp(44px, 14vw, 90px); }
  }